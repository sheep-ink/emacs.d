* ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹æ“ä½œæ–¹æ³•

| Emacs Quit       | C-x C-c                 |
| æ–‡å­—ã‚µã‚¤ã‚ºã®å¤‰æ›´ | C-x C-+/C-x C--/C-x C-0 |
| æ”¹è¡Œ             | C-m, RET                |
| æ“ä½œã®ã‚­ãƒ£ãƒ³ã‚»ãƒ« | C-g                     |

** ã‚«ãƒ¼ã‚½ãƒ«ã®ç§»å‹•
| ä¸Šã®è¡Œã¸        | C-p |                                       |
| ä¸‹ã®è¡Œã¸        | C-n |                                       |
| è¡Œé ­ã¸ç§»å‹• *    | C-a | crux-move-begining-of-line ã«å·®ã—æ›¿ãˆ |
| è¡Œæœ«ã¸ç§»å‹•      | C-e |                                       |
| å³ã« 1 æ–‡å­—ç§»å‹• | C-f |                                       |
| å·¦ã« 1 æ–‡å­—ç§»å‹• | C-b |                                       |

** å…¥åŠ›Â·å‰Šé™¤
| N å›åˆ† S ã‚’å…¥åŠ›  | C-<N> S |
| ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ› * | C-:     |
| 1 å­—å‰Šé™¤         | C-d     |
| 1 å­— Back Space  | C-j     |

* è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ¦‚è¦

** init.el
*** å…¨ä½“æ§‹é€ 
1. ã‚°ãƒ­ãƒ¼ãƒãƒ« (ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ  > å¤‰æ•° > å¤–è¦³ > æ©Ÿèƒ½)
2. å„ãƒ¢ãƒ¼ãƒ‰
3. ã‚µãƒ–ã‚·ã‚¹ãƒ†ãƒ  (Emacs å†…ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)

#+begin_src emacs-lisp :tangle init.el :noweb yes
<<file-header>>

;;;; Global Settings ------------------------------------------
<<package-system>>

<<variable>>

;;; Appearance
<<theme>>
<<global-face>>

;;; Input & Editing
<<ddskk>>
<<text-editing>>
<<input-completion>>
<<history>>
<<mini-buffer>>

;;; UI & Base
<<ui-and-base>>
<<auto-revert>>

;;; Workspace
<<desktop>>
<<project>>
<<tab-bar>>

<<directory>>
<<bookmark>>

;;;; Mode Settings --------------------------------------------
<<prog-mode>>
<<conf-mode>>
<<org-face>>
<<org-mode>>
<<markdown-mode>>
<<emacs-lisp-mode>>
<<other-modes>>

;;;; Subsystem Settings ---------------------------------------
<<magit>>
<<vterm>>
<<gptel>>

<<file-footer>>
#+end_src

*** è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã® Header / Footer

**** Header
=early.init.el= ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©ã™ã‚‹
_!!_ Header ãŠã‚ˆã³ Footer ã¯çœç•¥ã—ã¦ã‚‚å‹•ä½œä¸Šã®å•é¡Œã¯ãªã„

- ~Package --- ...~: ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¦‚è¦ã‚’ç¤ºã™
- ~lexical-binding: t~: Emacs 24.1 ä»¥é™ã§å°å…¥ã•ã‚ŒãŸé™çš„ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹
- ~Code~: ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®é–‹å§‹ä½ç½®ã‚’ç¤ºã™ãƒãƒ¼ã‚«ãƒ¼

#+begin_src emacs-lisp :noweb-ref file-header
;;; package --- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« -*- lexical-binding: t; -*-
;;; Commentary:
;;; Code:
#+end_src

**** Footer
- ~(provide 'early-init)~: ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒ =early-init= ã¨ã„ã†æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã“ã¨ã‚’å®£è¨€
- ~early-init.el ends here~: ãƒ•ã‚¡ã‚¤ãƒ«ã®çµ‚ç«¯ã‚’æ˜ç¤ºçš„ã«ç¤ºã™

#+begin_src emacs-lisp :noweb-ref file-footer
(provide 'init)
;;; init.el ends here
#+end_src

*** è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ ¼ç´å ´æ‰€ .emacs.d
Emacs ã®è¨­å®šã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã¯ =~/.emacs.d/= ã«æ ¼ç´ã™ã‚‹ã®ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚ã‚‹

**** ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- auto-save-list: è‡ªå‹•ä¿å­˜ã®è¨˜éŒ²ç®¡ç†
- eln-cache: ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸ .eln ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- elpa: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¿ç®¡å ´æ‰€
- image-dired: image-dired-mode ä½¿ç”¨æ™‚ã®ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- transient: Transient ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (Magit ãªã©) ã®å±¥æ­´Â·è¨­å®šã®ä¿å­˜
- tree-sitter: Tree-sitter ã®è¨€èªãƒ‘ãƒ¼ã‚µãƒ¼ã‚’ç½®ã

**** ãƒ•ã‚¡ã‚¤ãƒ«
- abbrev_defs: Abbrev ã§è¨­å®šã—ãŸç•¥èªå®šç¾©
- bookmarks: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯
- history: Mini Buffer ã®å…¥åŠ›å±¥æ­´
- kkcrc: DDSKK ã®è¨­å®š
- places: save-place-mode ã«ã‚ˆã‚‹ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®ãƒ‡ãƒ¼ã‚¿
- projects: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®šç¾©
- tramp: TRAMP (ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã§ãã‚‹æ©Ÿèƒ½) ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥Â·æ¥ç¶šå±¥æ­´
- .emacs.desktop, .emacs.desktop.lock: desktop-save-mode ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜ãƒ‡ãƒ¼ã‚¿

**** .gitignore
=*= ã§å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–ã— =!= ã§å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’è¿½åŠ ã™ã‚‹

_!!_ Org Mode ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã§ã¯, è¡Œé ­ã® =*= ã¯è‡ªå‹•ã¦ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚Œ =,= ãŒä»˜ã. æŠ½å‡º (tangle) ã®éš›ã«ã¯é™¤å»ã•ã‚Œã‚‹

#+begin_src text :tangle .gitignore
,*

!.gitignore
!emacs.org
!README.org
!abbrev_defs

!.github/
!.github/**
#+end_src

** eartly-init.el
init.el ã‚ˆã‚Šå‰ã«èª­ã¿è¾¼ã¾ã‚Œã‚‹. GUI ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–ã‚ˆã‚Šã‚‚å…ˆã«å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚, ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã«é©ã™ã‚‹

- ãƒ•ãƒ¬ãƒ¼ãƒ ã®å¤–è¦³: èµ·å‹•å‰ã«è¨­å®šã™ã‚‹ã“ã¨ã§èµ·å‹•æ™‚ã®ãƒãƒ©ã¤ããŒãªããªã‚‹
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆæœŸåŒ–ã®åˆ¶å¾¡

*** å…¨ä½“æ§‹é€ 
#+begin_src emacs-lisp :tangle early-init.el :noweb yes
;;; package --- åˆæœŸè¨­å®šãƒ•ã‚¡ã‚¤ãƒ« -*- lexical-binding: t; -*-
;;; Commentary:
;;; Code:

<<early-init-body>>

(provide 'early-init)
;;; early-init.el ends here
#+end_src

*** å„è¨­å®š
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¢ãƒ¼ã‚«ã‚¤ãƒ– (melpa ç­‰) ã‚’è¨­å®š. ~(setq package-enable-at-startup nil)~ ã§è‡ªå‹•ãƒ­ãƒ¼ãƒ‰ã‚’æŠ‘åˆ¶
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åˆæœŸåŒ–ã¨èª­ã¿è¾¼ã¿ã¯ init.el ã§è¡Œãªã†

#+begin_src emacs-lisp :noweb-ref early-init-body
(require 'package)
(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)
(setq package-enable-at-startup nil)
#+end_src

ãƒ•ãƒ¬ãƒ¼ãƒ å±æ€§ã®è¨­å®š (ç”»é¢æœ€å¤§åŒ–, ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼éè¡¨ç¤º, ãƒ•ãƒ¬ãƒ¼ãƒ å†…å´ã®ä½™ç™½è¨­å®š)
#+begin_src emacs-lisp :noweb-ref early-init-body
(push '(fullscreen . maximized) default-frame-alist)
(push '(undecorated . t) default-frame-alist)
(push '(internal-border-width . 12) default-frame-alist)
#+end_src

UI ãƒ¢ãƒ¼ãƒ‰ã®ç„¡åŠ¹åŒ– (ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼, ãƒ„ãƒ¼ãƒ«ãƒãƒ¼, ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼)
#+begin_src emacs-lisp :noweb-ref early-init-body
(menu-bar-mode -1)
(tool-bar-mode -1)
(scroll-bar-mode -1)
#+end_src

* å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ ,  ç·¨é›†, è£œå®Œ

**  DDSKK
[[https://github.com/skk-dev/ddskk][GitHub]] | [[https://ddskk.readthedocs.io/ja/latest/index.html][Docs]]

SKK è¾æ›¸ > Google API ã®é †ã«æ¤œç´¢Â·å¤‰æ›ã•ã‚Œã‚‹

~pdtk-use-im...~ ã§ OS å´ã® IME ã‚’ Emacs å†…ã§ã¯ OFF ã«ã™ã‚‹ã“ã¨ã§, ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã« <zenkaku/hankaku> ãŒä½¿ãˆã‚‹. ~:map~ ã‚’ç”¨ã„ã¦æ¤œç´¢ (isearch )æ™‚ã‚‚æœ‰åŠ¹åŒ–ã—ã¦ã„ã‚‹
~sheep/skk-mode-force-on~ é–¢æ•°ã§, Emacs ã§ skk-mode ãŠã‚ˆã³ skk-latin-mode (åŠè§’è‹±æ•°) ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ã—ã¦ã„ã‚‹. Emacs èµ·å‹•æ™‚ã®ã‚«ãƒ¼ã‚½ãƒ«è‰²ãŒã²ã‚‰ãŒãªç”¨ (skk-cursor-hiragana-color) ã«ãªã‚‹ãŸã‚, åŠè§’è‹±æ•°ç”¨ (skk-cursor-latin-color) ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ã¦ã„ã‚‹

_!!_ æ–°ã—ã„è¨­å®šé …ç›®ã‚’è¿½åŠ ã™ã‚‹ã¨ãã¯ use-package ã®ã©ã“ã«è¨˜è¿°ã™ã‚‹ã¨å‹•ãã‹æ¨¡ç´¢ãŒå¿…è¦. ã¾ãšã¯å¤–ã§è©¦ã™ã®ã‚‚ã‚¢ãƒª

#+begin_src emacs-lisp :noweb-ref ddskk
(use-package ddskk
  :init
  ;; å…¥åŠ›ãƒ«ãƒ¼ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
  (setq skk-rom-kana-rule-list
	'(("["  nil "ï½¢")
          ("]"  nil "ï½£")
	  ("!"  nil "!")
	  ("?"  nil "?")
	  ("-"  nil "-")
          ("z;"  nil "; ")
          ("z:"  nil ": ")
	  ("z," nil "Â·")
	  ("z/" nil "/")))

  ;; Google API for Japanese Input ã‚’æœ‰åŠ¹åŒ–
  (with-eval-after-load 'skk-vars
    (require 'skk-search-web)
    (add-to-list 'skk-search-prog-list
                 '(skk-search-web 'skk-google-cgi-api-for-japanese-input)
                 t))

  ;; isearch ã§ã‚‚ ssk-mode ã‚’ä½¿ç”¨ã™ã‚‹
  (with-eval-after-load 'isearch
    (add-hook 'isearch-mode-hook #'skk-isearch-mode-setup)
    (add-hook 'isearch-mode-end-hook #'skk-isearch-mode-cleanup))

  ;; PGTK ç’°å¢ƒã§ OS å´ã® IME ã‚’ OFF
  (when (featurep 'pgtk)
    (setq pgtk-use-im-context-on-new-connection nil))

  (defun sheep/skk-mode-force-on ()
    "skk-mode ã‚’æœ‰åŠ¹åŒ–ã—, skk-latin-mode ã«åˆ‡ã‚Šæ›¿ãˆã‚‹"
    (when (fboundp 'skk-mode)
      ;; skk-mode ãŒã‚ªãƒ•ã®å ´åˆã®ã¿æœ‰åŠ¹åŒ–
      (unless (bound-and-true-p skk-mode)
	(skk-mode 1))
      ;; skk-latin-mode ã‚’æœ‰åŠ¹åŒ–
      (skk-latin-mode 1)
      ;; skk-latin-mode ç”¨ã®ã‚«ãƒ¼ã‚½ãƒ«è‰²ã‚’æŒ‡å®š
      (when (and (boundp 'skk-cursor-latin-color)
		 skk-cursor-latin-color)
	(set-cursor-color skk-cursor-latin-color))))

  :hook
  ;; skk-mode ã‚’ã‚ªãƒ³, å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã‚’ skk-latin-mode ã«
  ;; (Emacs èµ·å‹•, ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã, ãƒãƒƒãƒ•ã‚¡åˆ‡ã‚Šæ›¿ãˆ, Vterm èµ·å‹•, Gptel èµ·å‹•, ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç·¨é›†ã®ã¨ã)
  ((after-init find-file vterm-mode gptel-mode git-commit-mode) . sheep/skk-mode-force-on)
  ;; (Window, Buffer åˆ‡ã‚Šæ›¿ãˆã®ã¨ã)
  (window-selection-change-functions . (lambda (_) (sheep/skk-mode-force-on)))

  ;; å¤‰æ›æ™‚ã® face ã‚’è¨­å®š
  (skk-load . (lambda ()
                (set-face-attribute 'skk-henkan-face-default nil
                                    :foreground (sheep/color 'fg-henkan)
                                    :background (sheep/color 'bg-henkan))))

  :custom
  (skk-use-azik t)                                 ; AZIK ã‚’æœ‰åŠ¹åŒ–
  (skk-large-jisyo "/usr/share/skk/SKK-JISYO.L")   ; åŸºæœ¬è¾æ›¸
  (skk-kuten-touten-alist '((en . (". " . ", ")))) ; åŠè§’ã® ,. ã‚’å¥èª­ç‚¹ã¨ã—ã¦å®šç¾©
  (skk-kutouten-type 'en)                          ; å¥èª­ç‚¹ã¯è‹±æ–‡ã‚¹ã‚¿ã‚¤ãƒ«

  ;; ã‚«ãƒ¼ã‚½ãƒ«è‰²
  (skk-cursor-latin-color (sheep/color 'cursor-en))    ; è‹±æ•°
  (skk-cursor-hiragana-color (sheep/color 'cursor-jp)) ; ã²ã‚‰ãŒãª
  (skk-cursor-katakana-color (sheep/color 'cursor-ka)) ; ã‚«ã‚¿ã‚«ãƒŠ

  :bind
  (("<zenkaku-hankaku>" . skk-kakutei)           ; ç¢ºå®šÂ·æ—¥æœ¬èªåˆ‡ã‚Šæ›¿ãˆ

   ;; isearch ã§ã‚‚å…¥åŠ›åˆ‡ã‚Šæ›¿ãˆã‚’æœ‰åŠ¹åŒ–
   :map isearch-mode-map
   ("<zenkaku-hankaku>" . skk-isearch-newline))) ; ç¢ºå®šÂ·æ—¥æœ¬èªåˆ‡ã‚Šæ›¿ãˆ
#+end_src

*** è¨˜å·ã®å…¥åŠ›
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‹ã‚‰æŠœç²‹ (ã‚«ã‚¹ã‚¿ãƒ è¨­å®šã¯ã‚³ãƒ¼ãƒ‰å‚ç…§)

| z[ | ã€  |
| z] | ã€  |
| z, | â€¥ |
| z. | â€¦ |

*** æœªä½¿ç”¨ã®æ©Ÿèƒ½
#+begin_src emacs-lisp
;; :init
(setq skk-search-sagyo-henkaku t) ; ã‚µå¤‰å‹•è©å¤‰æ›

;; :custom
(skk-search-katakana t) ; ã‚«ã‚¿ã‚«ãƒŠå¤‰æ›
#+end_src

*** å€‹äººè¾æ›¸
å€‹äººè¾æ›¸ ~~/.skk-jisyo~ ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¤‰æ›å±¥æ­´ã‚’è¨˜éŒ²ã™ã‚‹. M-x ~skk-sisyo-edit~ ã§ç·¨é›†ã§ãã‚‹ãŒ, åŸºæœ¬çš„ã«æ”¾ç½®ã§ã‚ˆã„
å¤‰æ›ã‚’ç¢ºå®šã™ã‚‹ã¨èª¤å¤‰æ›ã§ã‚ã£ã¦ã‚‚å€‹äººè¾æ›¸ã«è‡ªå‹•ç™»éŒ²ã•ã‚Œã‚‹. C-g ã§ç¢ºå®šå‰ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹ã®ãŒæœ›ã¾ã—ã„ãŒ, å®Ÿã¯èª¤å¤‰æ›ãŒç™»éŒ²ã•ã‚Œã¦ã‚‚å®Ÿå®³ã¯å°‘ãªã„. æ­£ã—ã„å¤‰æ›ã‚’ç¹°ã‚Šè¿”ã—ä½¿ãˆã°ãã‚ŒãŒå€‹äººè¾æ›¸ã®ä¸Šä½ã«æ¥ã¦, ã™ãªã‚ã¡å¤‰æ›å€™è£œã®ä¸Šä½ã«æ¥ã‚‹. è¾æ›¸ã«ç™»éŒ²ã•ã‚ŒãŸèª¤å¤‰æ›ã¯æ°—ãŒå‘ã„ãŸã¨ãã«æ°—ã¥ã„ãŸã‚‰æ¶ˆã™ç¨‹åº¦ã§ååˆ†ãªã‚ˆã†ã§ã‚ã‚‹

** ãƒ†ã‚­ã‚¹ãƒˆç·¨é›† Text Editing
xremap ã§å·¦å³ Shift ã‚’ F14 <Launch5> ã«ãƒªãƒãƒƒãƒ—ã—, Emacs ã§ <Launch5> ã‚’ =Hyper ã‚­ãƒ¼= ã¨ã—ã¦å®šç¾©ã—ã¦ã„ã‚‹
ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ =C-j= ã‚’ :init ã§ key-translation-map ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã—ã¦ã„ã‚‹ã®ã¯, ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚„ãƒ¢ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦è¨­å®šãŒä¸Šæ›¸ãã•ã‚Œã‚‹ã®ã‚’é˜²ããŸã‚ã§ã‚ã‚‹. ãŸã ã—å¤šãã®å ´åˆ :bind ã«è¨˜è¿°ã—ã¦ã‚‚å•é¡Œã¯ãªã„

#+begin_src emacs-lisp :noweb-ref text-editing
(use-package emacs
  :ensure nil
  :init
  (define-key input-decode-map (kbd "<Launch5>") 'event-apply-hyper-modifier) ; Hyper ã‚­ãƒ¼ã®å®šç¾©
  (define-key key-translation-map (kbd "C-j") (kbd "<DEL>"))                  ; DEL=BackSpace ã®å®šç¾©

  (setopt indent-tabs-mode nil) ; ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯ã‚¹ãƒšãƒ¼ã‚¹ã§çµ±ä¸€

  :custom
  ;; Sentence ã®çµ‚ç«¯ (åŒºåˆ‡ã‚Š) ã‚’æŒ‡å®š. M-a, M-e ç­‰ã®åŸºæº–ã¨ãªã‚‹
  (sentence-end-double-space nil) ; åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ 1 å­—ã§åŒºåˆ‡ã‚Šã‚’æ¤œçŸ¥

  :config
  (defun sheep/kill-line ()
    "ã‚«ãƒ¼ã‚½ãƒ«ã®ç¾åœ¨ä½ç½®ã‚’ä¿æŒã—ãªãŒã‚‰, ä¸‹ã®è¡Œã‚’å‰Šé™¤"
    (interactive)
    (save-excursion
      (forward-line 1)
      (kill-whole-line)))

  (defun sheep/kill-line-above ()
    "ã‚«ãƒ¼ã‚½ãƒ«ã®ç¾åœ¨ä½ç½®ã‚’ä¿æŒã—ãªãŒã‚‰, ä¸Šã®è¡Œã‚’å‰Šé™¤"
    (interactive)
    (save-excursion
      (forward-line -1)
      (kill-whole-line)))

  (defun sheep/smart-open-line ()
    "ã‚«ãƒ¼ã‚½ãƒ«ã®ç¾åœ¨ä½ç½®ã‚’ä¿æŒã—ãªãŒã‚‰, ä¸‹ã®è¡Œã«ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãªã—ã®ç©ºè¡Œã‚’è¿½åŠ "
    (interactive)
    (save-excursion
      (move-end-of-line nil)
      (newline)))

  (defun sheep/smart-open-line-above ()
    "ã‚«ãƒ¼ã‚½ãƒ«ã®ç¾åœ¨ä½ç½®ã‚’ä¿æŒã—ãªãŒã‚‰, ä¸Šã®è¡Œã«ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãªã—ã®ç©ºè¡Œã‚’è¿½åŠ "
    (interactive)
    (save-excursion
      (move-beginning-of-line nil)
      (open-line 1)))

  (defun sheep/copy-line ()
    "ç¾åœ¨è¡Œã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹"
    (interactive)
    (beginning-of-line)
    (set-mark-command nil)
    (forward-line 1)
    (kill-ring-save (point) (mark))
    (forward-line -1)
    (deactivate-mark))

  (defun sheep/copy-to-end-of-line ()
    "ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‹ã‚‰è¡Œæœ«ã¾ã§ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹"
    (interactive)
    (kill-ring-save (point) (line-end-position)))

  :bind
  (("C-h"   . set-mark-command)   ; mark ã®ã‚»ãƒƒãƒˆ (Kill Ring ã®ã‚«ãƒƒãƒˆ)
   ("C-S-h" . mark-whole-buffer)  ; Buffer å†…ã‚’å…¨ã¦é¸æŠ

   ("H-l" . sheep/smart-open-line)       ; ä¸‹ã«ç©ºè¡Œã‚’è¿½åŠ 
   ("M-l" . sheep/smart-open-line-above) ; ä¸Šã«ç©ºè¡Œã‚’è¿½åŠ 

   ("H-," . sheep/kill-line)       ; ä¸‹ã®è¡Œã‚’å‰Šé™¤
   ("M-," . sheep/kill-line-above) ; ä¸Šã®è¡Œã‚’å‰Šé™¤
   ("C-," . (lambda () (interactive) (kill-line 0))) ; ã‚«ãƒ¼ã‚½ãƒ«ã‹ã‚‰è¡Œé ­ã¾ã§ Kill

   ("C-k" . kill-region)         ; é¸æŠç¯„å›²ã‚’ Kill
   ;; M-k . crux-kill-whole-line
   ("H-k" . kill-line)           ; ã‚«ãƒ¼ã‚½ãƒ«ã‹ã‚‰è¡Œæœ«ã¾ã§ Kill

   ("C-w" . kill-ring-save)            ; é¸æŠç¯„å›²ã‚’ Copy
   ("M-w" . sheep/copy-line)           ; è¡Œ Copy
   ("H-w" . sheep/copy-to-end-of-line) ; ã‚«ãƒ¼ã‚½ãƒ«ã‹ã‚‰è¡Œæœ«ã¾ã§ Copy

   ("C-v" . yank)                                 ; Yanking (ãƒšãƒ¼ã‚¹ãƒˆ)
   ;; M-v . consult-yank-from-kill-ring
   ;; H-v . crux-duplicate-current-line-or-region

   ("M-h" . mark-word)
   ("M-j" . backward-kill-word)

   ("H-h" . mark-sexp)
   ("H-f" . forward-sexp)
   ("H-b" . backward-sexp)
   ("H-p" . backward-up-list)
   ("H-n" . down-list)
   ("H-d" . kill-sexp)
   ("H-j" . backward-kill-sexp)

   ("C-:" . comment-dwim)        ; ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
   ("H-:" . revert-buffer-quick) ; Buffer æ›´æ–°
   ("C-@" . universal-argument)  ; å¾Œç¶šã®ã‚³ãƒãƒ³ãƒ‰ã«å¼•æ•°ã‚’æ¸¡ã™

   ("C-." . isearch-forward)  ; å¾Œæ–¹æ¤œç´¢
   ("C->" . isearch-backward) ; å‰æ–¹æ¤œç´¢
   ;; M-. . consult-line
   ;; H-. . consult-outline

   :map isearch-mode-map
   ("C-." . isearch-repeat-forward)    ; æ¬¡ã®æ¤œç´¢å€™è£œ
   ("C->" . isearch-repeat-backward))) ; å‰ã®æ¤œç´¢å€™è£œ
#+end_src

*** Word ã‚³ãƒãƒ³ãƒ‰
Kill ãŠã‚ˆã³ Back Kill ã¯ Kill Ring ã«è¨˜éŒ²ã•ã‚Œã‚‹

| å³ã« 1 å˜èªç§»å‹•      | M-f |                        |
| å·¦ã« 1 å˜èªç§»å‹•      | M-b |                        |
| mark-Word *          | M-h | Default: M-@           |
| kill-word            | M-d |                        |
| backward-kill-word * | M-j | Default: M-<backspace> |

*** Sentence ã‚³ãƒãƒ³ãƒ‰
=.ã€‚!?= ãªã©ã®çµ‚ç«¯è¨˜å·ã«åŸºã¥ã„ã¦ç§»å‹•Â·å‰Šé™¤ã‚’è¡Œãªã†. çµ‚ç«¯è¨˜å·ã¯ M-: ~sentence-ende-base~ ã‚„ M-: ~sentence-end-without-space~ (æ—¥æœ¬èªå¯¾å¿œ) ã§ç¢ºèªã§ãã‚‹. custom: å†…ã§ä¸Šæ›¸ãè¨­å®šã‚‚å¯èƒ½

| backward-sentence | M-a |
| forward-sentence  | M-e |

*** Sexp ã‚³ãƒãƒ³ãƒ‰
Emacs Lisp ã‚„ CSS ãªã©, ã‚·ãƒ³ã‚°ãƒ«ã‚«ãƒƒã‚³ã§çµ„ã¿ãŸã¦ã‚‰ã‚ŒãŸæ§‹é€ å†…ã®ç§»å‹•Â·å‰Šé™¤ã«ä½¿ãˆã‚‹. éšå±¤é–“ã®ä¸Šä¸‹ç§»å‹•ã«ã¯ ~down-list~ ã‚„ ~backward-up-list~ ã‚’ä½µç”¨ã™ã‚‹

** å…¥åŠ›ã®æ©Ÿèƒ½å¼·åŒ–, è£œå®Œ
*** å…¥åŠ›ã®æ©Ÿèƒ½å¼·åŒ– Crux
[[https://github.com/bbatsov/crux?tab=readme-ov-file#keybindings][Commands-GitHub]]

~crux-move-beginning-of-line~ ã¯ 1 å›ç›®ã¯å®Ÿè³ªçš„ãªè¡Œã®å…ˆé ­ã«ç§»å‹•ã™ã‚‹. ã™ãªã‚ã¡ã‚¹ãƒšãƒ¼ã‚¹ã‚„ Org Mode ã®è¦‹å‡ºã—è¨˜å· * ç­‰ã‚’è€ƒæ…®ã—, ãƒ†ã‚­ã‚¹ãƒˆã‚„ã‚³ãƒ¼ãƒ‰ã®1æ–‡å­—ç›®ã«ã‚«ãƒ¼ã‚½ãƒ«ãŒç§»å‹•ã™ã‚‹. ã•ã‚‰ã«å®Ÿè¡Œã™ã‚‹ã¨æœ¬æ¥ã®è¡Œé ­ã«ç§»å‹•ã™ã‚‹
~sheep/smart-open-line-above~ ã¯, ~crux-smart-open-line-above~ ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ä½œã‚Œãªã‹ã£ãŸ. ãƒ©ãƒƒãƒ—ã™ã‚‹ã¨ç¾åœ¨è¡Œã®è¡Œé ­ãŒ _ ã®æ™‚ã«ã†ã¾ãå‹•ä½œã—ãªã„
~crux-recentf-find-file~ ã¯, æ¨™æº–æ©Ÿèƒ½ recentf ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã“ã¨ã§ä½¿ç”¨ã§ãã‚‹ 

#+begin_src emacs-lisp :noweb-ref input-completion
(use-package crux
  :bind
  (("H-o" . crux-smart-open-line)       ; è¡Œã®é€”ä¸­ã§ã‚‚ä¸‹ã«ç©ºè¡Œã‚’è¿½åŠ 
   ("M-o" . crux-smart-open-line-above) ; è¡Œã®é€”ä¸­ã¦ã‚‚ä¸Šã«ç©ºè¡Œã‚’è¿½åŠ 

   ("H-v" . crux-duplicate-current-line-or-region) ; ç¾åœ¨ã®è¡Œã¾ãŸã¯é¸æŠç¯„å›²ã‚’ä¸‹ã«è¤‡è£½

   ("M-k" . crux-kill-whole-line)        ; è¡Œå…¨ä½“ã‚’å‰Šé™¤
   ("C-a" . crux-move-beginning-of-line) ; è¡Œã®å®Ÿè³ªçš„ãªè¡Œé ­ã«ç§»å‹•

   ("C-M-s" . crux-rename-file-and-buffer) ; ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«åã¨ Buffer åã‚’å¤‰æ›´
   ("M-;"   . crux-transpose-windows)      ; 2 ã¤ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–“ã§ Buffer ã‚’å…¥ã‚Œæ›¿ãˆã‚‹

   ("s-q"   . crux-recentf-find-file))) ; æœ€è¿‘ä½¿ç”¨ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
#+end_src

*** è¡Œç§»å‹• Move Text
[[https://github.com/emacsfodder/move-text][GitHub]]

é¸æŠç¯„å›²ã‚’æŒ‡å®šã—ã¦ã„ã‚‹å ´åˆã¯,ãã®ç¯„å›²å…¨ä½“ã‚’ç§»å‹•ã§ãã‚‹
_!!_ Org Mode ã§ã¯ä½¿ãˆãªã„ (ãŸã ã— Org Mode ã¯å¤šãã®è¦ç´ ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç§»å‹•å¯èƒ½ã§ã‚ã‚‹)

#+begin_src emacs-lisp :noweb-ref input-completion
(use-package move-text
  :config
  (defun my/indent-region-advice (&rest ignored)
    "ç§»å‹•å¾Œã«è‡ªå‹•çš„ã«ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’èª¿æ•´ã™ã‚‹"
    (let ((deactivate deactivate-mark))
      (if (region-active-p)
          (indent-region (region-beginning) (region-end))
        (indent-region (line-beginning-position) (line-end-position)))
      (setq deactivate-mark deactivate)))

  (advice-add 'move-text-up :after #'my/indent-region-advice)
  (advice-add 'move-text-down :after #'my/indent-region-advice)

  :bind
  (("C-r" . move-text-up)
   ("C-t" . move-text-down)))
#+end_src

*** è‡ªå‹•è£œå®Œ Corfu
[[https://github.com/minad/corfu][GitHub]]

#+begin_src emacs-lisp :noweb-ref input-completion
(use-package corfu
  :init
  (setq global-corfu-modes '(not org-mode markdown-mode)) ; global-corfu-modeã‹ã‚‰é™¤å¤–ã™ã‚‹modeã‚’è¨­å®š
  (global-corfu-mode)                                     ; global-corfu-modeã‚’æœ‰åŠ¹åŒ–

  :custom
  (corfu-auto t)             ; è‡ªå‹•ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—
  (corfu-auto-delay 0.2)     ; è¡¨ç¤ºé…å»¶
  (corfu-auto-prefix 2)      ; ç™ºå‹•æ–‡å­—æ•°
  (corfu-cycle t)            ; å€™è£œãƒªã‚¹ãƒˆã‚’å¾ªç’°
  (corfu-preselect 'prompt)) ; èª¤ç¢ºå®šé˜²æ­¢ã®ãŸã‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é¸æŠçŠ¶æ…‹ã«
#+end_src

*** é™çš„ç•¥ç§°å±•é–‹ Abbrev
=SPC , .= ç­‰ã§å±•é–‹ã•ã‚Œã‚‹ (è¡Œæœ«ã®ã‚¹ãƒšãƒ¼ã‚¹ã¯æ”¹è¡Œã™ã‚Œã°è‡ªå‹•å‰Šé™¤ã•ã‚Œã‚‹)
_!!_ abbrev ã®æ—¢å­˜ã®å®šç¾©ã‚’æ›¸ãæ›¿ãˆã‚‹å ´åˆ, ~M-x edit-abbrevs~ ã§å¾“å‰ã®å®šç¾©ã®è¡Œã‚’å‰Šé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

#+begin_src emacs-lisp :noweb-ref input-completion
(use-package abbrev
  :ensure nil
  :hook
  ;; Abbrev ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ mode
  (org-mode . abbrev-mode)

  :custom
  (abbrev-file-name (locate-user-emacs-file "abbrev_defs")) ; abbrev ã®ä¿å­˜å…ˆ
  (save-abbrevs 'silently)                                  ; Buffer çµ‚äº†æ™‚ã«è‡ªå‹•ä¿å­˜

  :config
  ;; Org Mode ç”¨ã® abbrev å®šç¾©
  (define-abbrev-table 'org-mode-abbrev-table
    '(("zl" "[[][]]" nil :count 0)
      ("zt" "- [ ]" nil :count 0)
      ("zc" "_!!_" nil :count 0)
      ("zs" "_START_" nil :count 0)
      ("zb" "_BREAK_" nil :count 0)
      ("ze" "_END_" nil :count 0)
      ("zd" "ğŸ’" nil :count 0)
      ("zw" "ğŸ§­" nil :count 0)
      ("za" "ğŸ¨" nil :count 0)
      ("zem" "emacs-lisp" nil :count 0)
      ("zn" ":noweb-ref" nil :count 0))))
#+end_src

è¤‡æ•°ã® mode ã‚’æŒ‡å®šã™ã‚‹ã¨ãã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å…¨ä½“ã‚’ () ã§å›²ã†
#+begin_src emacs-lisp
:hook
((org-mode . abbrev-mode)
 (markdown-mode . abbrev-mode))
#+end_src

*** ä¸Šæ›¸ãå…¥åŠ› Delsel
é¸æŠç¯„å›²ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã¨ãã«æ–‡å­—ã‚’å…¥åŠ›ã™ã‚‹ã¨, é¸æŠç¯„å›²ã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰æ–‡å­—ã‚’æŒ¿å…¥ã™ã‚‹

#+begin_src emacs-lisp :noweb-ref input-completion
(use-package delsel
  :ensure nil
  :config
  (delete-selection-mode))
#+end_src

*** ã‚«ãƒƒã‚³ã®å…¥åŠ›è£œå®Œ Electric Pair
å¯¾å¿œã™ã‚‹é–‰ã˜ã‚«ãƒƒã‚³ã‚„å¼•ç”¨ç¬¦ã‚’è‡ªå‹•çš„ã«æŒ¿å…¥ã™ã‚‹

#+begin_src emacs-lisp :noweb-ref input-completion
(use-package elec-pair
  :ensure nil
  :config
  (electric-pair-mode))
#+END_SRC

*** ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹å˜ä½ã®æ–‡å­—åŒºåˆ‡ã‚Š Subword
word ç³»ã®ã‚³ãƒãƒ³ãƒ‰ã«ãŠã„ã¦ =camelCase= ã®å¤§æ–‡å­—ã® =C= ã®éƒ¨åˆ†ãŒåŒºåˆ‡ã‚Šã¨èªè­˜ã•ã‚Œã‚‹

#+begin_src emacs-lisp :noweb-ref ui-and-base
(use-package subword
  :ensure nil
  :init
  (global-subword-mode))
#+end_src

*** å¯è¦–ãƒ†ã‚­ã‚¹ãƒˆå†…ç§»å‹• Avy
[[https://github.com/abo-abo/avy][GitHub]]

_!!_ æ…£ã‚Œãªã„ã†ã¡ã¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼ãŒç”Ÿã˜ã‚„ã™ã„. =avy-temeout-seconds= ã®å€¤ã‚’ =0.7= ç¨‹åº¦ã«ã—ã¦ãŠã

#+begin_src emacs-lisp :noweb-ref input-completion
(use-package avy
  :config
  (setopt avy-timeout-seconds 0.7)                ; å…¥åŠ›å¾Œã®å¾…æ©Ÿæ™‚é–“
  (setopt avy-keys '(?a ?s ?d ?f ?g ?h ?j ?k ?l)) ; ãƒ’ãƒ³ãƒˆã«ä½¿ç”¨ã™ã‚‹æ–‡å­— (ãƒ›ãƒ¼ãƒ ãƒã‚¸ã‚·ãƒ§ãƒ³å„ªå…ˆ)
  (setopt avy-single-candidate-jump t)            ; å€™è£œãŒ 1 ã¤ã ã‘ã®æ™‚ã¯è‡ªå‹•çš„ã«ã‚¸ãƒ£ãƒ³ãƒ—

  :bind
  (("C-;" . avy-goto-char-timer)))
#+end_src

** å±¥æ­´ã®ç®¡ç† History
*** Undo  & Redo
æ°¸ç¶šåŒ–ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã§, Emacs ã‚’å†èµ·å‹•ã—ã¦ã‚‚, å†èµ·å‹•å‰ã®ä½œæ¥­å±¥æ­´ã‚’è¾¿ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹
Emacs ã®æ—§æ¥ã® undo ã‚³ãƒãƒ³ãƒ‰ã¯ Redo ã®å‹•ä½œã‚’å«ã‚€. ç´”ç²‹ã«éå»ã«æˆ»ã‚‹ undo-only ã¨, ç´”ç²‹ã«æœªæ¥ã«é€²ã‚€ (ã‚„ã‚Šç›´ã™) undo-redo ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ä¸€èˆ¬çš„ãªå±¥æ­´ç®¡ç†ãŒã§ãã‚‹

#+begin_src emacs-lisp :noweb-ref history
(use-package emacs
  :custom
  (undo-history-save-mode t)                                        ; undo å±¥æ­´ã®æ°¸ç¶šåŒ–
  (undo-history-directory (locate-user-emacs-file "undo-history/")) ; undo å±¥æ­´ã®ä¿å­˜å…ˆ

  ;; undo å±¥æ­´ã®ä¸Šé™è¨­å®š
  (undo-limit 800000)           ; é€šå¸¸ã¯ç´„ 800 KB ã¾ã§ä¿å­˜
  (undo-strong-limit 1200000)   ; é€£ç¶šç·¨é›†æ™‚ã¯ ç´„1.2MB ã¾ã§ä¿å­˜
  (undo-outer-limit 120000000)  ; çµ¶å¯¾ä¸Šé™ã¯ ç´„120MB. å·¨å¤§ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€æ‹¬ç½®æ›æ™‚ãªã©ã®ã‚¹ãƒˆãƒƒãƒ‘ãƒ¼

  :bind
  (("C-z" . undo-only)
   ("M-z" . undo-redo)))
#+end_src

*** Vundo
#+begin_src emacs-lisp :noweb-ref history
(use-package vundo
  :custom
  (vundo-glyph-alist vundo-unicode-symbols) ; å±¥æ­´ãƒ„ãƒªãƒ¼ (è¨˜å·ã‚„ç½«ç·š) ã®è¡¨ç¤ºã« unicode ã®ã‚°ãƒªãƒ•ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨

  :bind ("H-z" . vundo)) ; å±¥æ­´ãƒ„ãƒªãƒ¼ã®è¡¨ç¤º
#+end_src

| b, f   | undo, redo æ–¹å‘ã¸ç§»å‹•                      |
| n, p   | ä»–ã®ãƒ–ãƒ©ãƒ³ãƒã«ç§»å‹•                         |
| C-m    | é¸æŠã—ãŸå±¥æ­´ã®çŠ¶æ…‹ã§ãƒãƒƒãƒ•ã‚¡ã‚’å¾©å…ƒã—ã¦çµ‚äº† |
| q, C-g | vundo ã®çµ‚äº† (ãƒãƒƒãƒ•ã‚¡ã®çŠ¶æ…‹ã¯å¤‰æ›´ã—ãªã„   |
| a, e   | æœ€ã‚‚å¤ã„çŠ¶æ…‹ã¸, æœ€ã‚‚æ–°ã—ã„çŠ¶æ…‹ã¸           |
| i      | ç¾åœ¨è¡¨ç¤ºã—ã¦ã„ã‚‹ä½ç½®ã®å·®åˆ†ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º |

*** ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®ä¿å­˜ Save Place
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸã¨ãã«,å‰å›é–‰ã˜ãŸã¨ãã®ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‚’å¾©å…ƒã™ã‚‹

#+begin_src emacs-lisp :noweb-ref history
(use-package saveplace
  :ensure nil
  :init
  (save-place-mode))
#+end_src

* æ–‡æ³•ãƒã‚§ãƒƒã‚¯, ã‚³ãƒ¼ãƒ‰æ•´å½¢

** Tree-sitter
*** å°å…¥
1. Git ã‚„ build-essential ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã§ã‚ã‚‹ã“ã¨, M-: ~(treesit-available-p)~ ãŒ t (Tree-sitter ãŒæœ‰åŠ¹) ã§ã‚ã‚‹ã“ã¨ãŒå‰æã¨ãªã‚‹

2. Emacs ãŒå¯¾å¿œå¯èƒ½ãª Tree-sitter ABI ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èª¿ã¹ã‚‹
   Emacs 30 ç³»ã¯å½“é¢ ABI 14 å¯¾å¿œãŒã¤ã¥ãè¦‹è¾¼ã¿. Ubuntu 24.04 LTS ã® libtree-sitter 0.20.x ã‚‚ ABI 14 å¯¾å¿œ. 15 ã®å°å…¥ã¯ 0.22.0 ä»¥é™

   #+begin_src shell
# Emacs ãŒå¯¾å¿œå¯èƒ½ãª Tree-sitter ABI ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
emacs --batch --eval "(message \"Tree-sitter ABI: %s\" (treesit-library-abi-version nil))"

# ã‚·ã‚¹ãƒ†ãƒ ã® libtree-sitter ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
dpkg -l | grep tree-sitter
   #+end_src

3. [[https://github.com/tree-sitter-grammars][Tree-sitter Grammars (æ–°ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£)]] ã¾ãŸã¯ [[https://github.com/tree-sitter][tree-sitter (æ—§å…¬å¼)]] ã‹ã‚‰å¿…è¦ãªæ–‡æ³•ã‚’ ~/.emacs.d/tree-sitter/ ã«é…ç½®ã™ã‚‹

   HTML: https://github.com/tree-sitter/tree-sitter-html
   TOML: https://github.com/tree-sitter-grammars/tree-sitter-toml

   HTML ã®å°å…¥ä¾‹

   1) M-x ~treesit-install-language-grammar~
   2) Language: ~html~ > RET > y
   3) ä¸Šã® URL ã‚’æŒ‡å®š
   4) tag or branch: default branch ã®ã¾ã¾ RET
   5) subdirectory: default "src" ã®ã¾ã¾ RET
   6) C compiler: default auto-detect ã®ã¾ã¾ RET
   7) C++ compiler: default auto-detect ã®ã¾ã¾ RET
   8) Install to: default ~/.emacs.d/tree-sitter ã®ã¾ã¾ RET
   9) Emacs ã‚’å†èµ·å‹•. ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã‚‚å†èµ·å‹•ã§è§£æ¶ˆã™ã‚‹å ´åˆã‚ã‚Š
   10) M-: ~(treesit-language-available-p 'html)~ ã§ t ãŒè¿”ã£ã¦ãã‚Œã°å°å…¥æˆåŠŸ

***  ABI 15 ç”¨ã®æ–‡æ³•ã‚’ ABI 14 ç”¨ã«å¤‰æ›ã™ã‚‹
æ–‡æ³•ãŒ ABI 15 ç”¨ã®å ´åˆ, ABI 14 ç’°å¢ƒã«å°å…¥ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ãŸã‚, å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
=â›” Warning (treesit): The installed language grammar for css cannot be located or has problems (version-mismatch): 15=

1. ç’°å¢ƒæ•´å‚™ (åˆå›ã®ã¿)
   - Git (ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‰ˆã§ OK. npm ç­‰ã¯ä¸è¦)
   - Tree-sitter ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—, ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªã™ã‚‹

    #+begin_src shell
   cargo install tree-sitter-cli

   tree-sitter --version
   #+end_src

2. æ–‡æ³•ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³

   CSS: ~git clone https://github.com/tree-sitter/tree-sitter-css.git~
   YAML: ~git clone https://github.com/tree-sitter-grammars/tree-sitter-yaml.git~

3. ABI 14 ç”¨ã«ãƒ“ãƒ«ãƒ‰
   _!!_ ãƒ•ã‚¡ã‚¤ãƒ«åã¯æ›¸ãæ›¿ãˆã¦å®Ÿè¡Œã™ã‚‹ã“ã¨

   #+begin_src shell
# ç§»å‹• !!yaml æ›¸ãæ›¿ãˆ
cd tree-sitter-yaml

# ABI 14 ç”¨ã«ãƒ“ãƒ«ãƒ‰
tree-sitter generate --abi=14

# å…±ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ“ãƒ«ãƒ‰
tree-sitter build

# .emacs.d ã«ã‚³ãƒ”ãƒ¼ !!yaml 2 ãƒ¶æ‰€æ›¸ãæ›¿ãˆ
cp yaml.so ~/.emacs.d/tree-sitter/libtree-sitter-yaml.so
   #+end_src

4. å‹•ä½œç¢ºèª (YAML ã®å ´åˆ)
   1) å†èµ·å‹•å¾Œ, =*scratch*= ç­‰ã§ M-x ~yaml-ts-mode~ ã‚’å®Ÿè¡Œ. ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã‘ã‚Œã°åŸºæœ¬çš„ã«èªè­˜ã•ã‚Œã¦ã„ã‚‹
   2) å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã¿ã¦, ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚„è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒåŠ¹ãã‹ç¢ºèª
   3) M-: ~(treesit-parser-create 'yaml)~ RET ã§, ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã‘ã‚Œã° OK
   4) M-: ~(treesit-language-available-p 'yaml)~ RET ã§, t ãŒè¿”ã‚Œã° OK

* æ¤œç´¢

** isearch
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›å¾Œ, C-. ã§æ¬¡å€™è£œ, C-> ã§å‰å€™è£œã«ç§»å‹•ã—, RET ã§ç¢ºå®šã™ã‚‹

* UI & Base

ç”»é¢è¡¨ç¤º (Face ä»¥å¤–) ã¨åŸºæœ¬çš„ãªæŒ™å‹•ã‚’è¨­å®šã™ã‚‹

#+begin_src emacs-lisp :noweb-ref ui-and-base
(use-package emacs
  :ensure nil
  :init
  ;; ç²¾å¯†ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®æœ‰åŠ¹åŒ–
  (when (fboundp 'pixel-scroll-precision-mode)
    (pixel-scroll-precision-mode 1))

  :custom
  ;; Interaction
  (use-short-answers t) ; yes-or-no ã‚’ y-or-n ã«å¤‰æ›´

  ;; Save & Revert
  (kill-ring-max 20)                      ; Kill Ring ã®æœ€å¤§æ•°
  (save-interprogram-paste-before-kill t) ; Kill Ring ã«æ–°ã—ã„ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹å‰ã«ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã®å†…å®¹ã‚’ä¿å­˜
  (make-backup-files nil)                 ; ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ãªã„
  (create-lockfiles nil)                  ; ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ãªã„
  (delete-by-moving-to-trash t)           ; å‰Šé™¤ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚´ãƒŸç®±ã«ç§»å‹•

  ;; Window & Buffer
  (split-width-threshold 0)      ; æ°´å¹³åˆ†å‰²ã‚’å„ªå…ˆ
  (split-height-threshold nil)   ; å‚ç›´åˆ†å‰²ã‚’æŠ‘åˆ¶
  (scroll-conservatively 101)    ; ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã®ç”»é¢é£›ã³ã‚’é˜²æ­¢
  (scroll-margin 0)              ; ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚¸ãƒ³ãªã—
  (show-trailing-whitespace t)   ; è¡Œæœ«ã®ç©ºç™½æ–‡å­—ã‚’å¯è¦–åŒ–
  (initial-scratch-message nil)  ; *scratch* ã®åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤ºã«
  (initial-major-mode 'org-mode) ; *scratch* ã®åˆæœŸãƒ¢ãƒ¼ãƒ‰ã‚’ Org Modeã«

  :config
  (defun sheep/split-window-and-focus ()
    "ç”»é¢ã‚’å³ã«åˆ†å‰²ã—ã¦ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’ç§»å‹•ã™ã‚‹"
    (interactive)
    (let ((new-window (split-window-right)))
      (select-window new-window)))

  (defun sheep/find-home ()
    "HOME.org ã‚’é–‹ã"
    (interactive)
    (find-file "~/daily/HOME.org"))

  (defun sheep/find-daily ()
    "DAILY.org ã‚’é–‹ã"
    (interactive)
    (find-file "~/daily/DAILY.org"))

  (defun sheep/find-lifelog ()
    "LIFELOG.org ã‚’é–‹ã"
    (interactive)
    (find-file "~/daily/LIFELOG.org"))

  (defun sheep/find-init ()
    "è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (emacs.org )ã‚’é–‹ã"
    (interactive)
    (find-file "~/.emacs.d/emacs.org"))

  :bind
  (("H-g"   . kill-current-buffer)    ; ç¾åœ¨ã® Buffer ã‚’ Kill ã™ã‚‹
   ("M-g"   . kill-buffer-and-window) ; ç¾åœ¨ã® Buffer ã‚’ Kill ã—ã¦ Window ã‚’é–‰ã˜ã‚‹
   ("C-M-g" . delete-window)          ; ç¾åœ¨ã® Window ã‚’é–‰ã˜ã‚‹

   ;; C-q   . consult-buffer
   ("C-c q" . ibuffer)                      ; Buffer ã®ç®¡ç†
   ;; s-q   . crux-recentf-find-file
   ("C-S-q" . find-file)                    ; ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
   ("M-q"   . sheep/split-window-and-focus) ; æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’å³ã«é–‹ãã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•ã™ã‚‹
   ;; H-q   . org-edit-special

   ("C-s" . save-buffer)       ; ç¾åœ¨ã® Buffer ã®ä¿å­˜
   ("M-s" . save-some-buffers) ; Buffer ã®ä¿å­˜
   ;; H-s . org-babel-tangle

   ;; C-; . avy-goto-char-timer
   ;; M-; . crux-transpose-windows
   ("H-;" . other-window) ; ä»–ã® Window ã«ç§»å‹•

   ("M-[" . scroll-down-command)      ; ä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
   ("M-]" . scroll-up-command)        ; ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
   ("s-[" . scroll-other-window-down) ; åˆ¥ Window ã‚’ä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
   ("s-]" . scroll-other-window)      ; åˆ¥ Window ã‚’ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
   ("H-[" . beginning-of-buffer)      ; Buffer ã®å…ˆé ­ã«ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•
   ("H-]" . end-of-buffer)            ; Buffer ã®æœ«å°¾ã«ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•

   ("C-/" . visual-line-mode) ; è¡Œã®æŠ˜ã‚Šè¿”ã—ãƒ¢ãƒ¼ãƒ‰ã®ãƒˆã‚°ãƒ«
   ("M-/" . read-only-mode)   ; èª­ã¿å–ã‚Šå°‚ç”¨ãƒ¢ãƒ¼ãƒ‰ã®ãƒˆã‚°ãƒ«
   ("H-/" . emacs-lisp-mode)  ; Emacs Lisp ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ

   ("H-@ h" . sheep/find-home)    ; HOME.org ã‚’é–‹ã
   ("H-@ d" . sheep/find-daily)   ; DAILY.org ã‚’é–‹ã
   ("H-@ l" . sheep/find-lifelog) ; LIFELOG.org ã‚’é–‹ã
   ("H-@ i" . sheep/find-init)    ; è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (emacs.org) ã‚’é–‹ã
   ("H-@ s" . scratch-buffer)     ; *scratch* ã‚’é–‹ã
   ("H-@ p" . previous-buffer)    ; å‰ã® Buffer
   ("H-@ n" . next-buffer)))      ; æ¬¡ã® Buffer
#+end_src

** UI ã®éšå±¤æ§‹é€ 
- Frame: OS ãƒ¬ãƒ™ãƒ«ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
  - Window
    - Display Area: Buffer ã®æœ¬ä½“
    - Mode Line: Buffer ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  - Echo Area (é€šçŸ¥) / Minibuffer (ã‚³ãƒãƒ³ãƒ‰å…¥åŠ›Â·æ¤œç´¢)

** Frame
| Current Frame Close        | C-x 5 0 |
| Current Frame ä»¥å¤–ã‚’ Close | C-x 5 1 |
| New Frame                  | C-x 5 2 |

** Window
| Current Window Close *     | C-x 0 | C-M-g ã‚’å‰²ã‚Šå½“ã¦                      |
| ç¾åœ¨ã® Window ä»¥å¤–ã‚’ Close | C-x 1 |                                       |
| Window ã‚’ä¸Šä¸‹ã«åˆ†å‰²        | C-x 2 |                                       |
| Window ã‚’å·¦å³ã«åˆ†å‰² *      | C-x 3 | å¾®ä¿®æ­£ã—ãŸè‡ªä½œé–¢æ•°ã« M-q ã‚’å‰²ã‚Šå½“ã¦   |
| Window ã®æ¨ªå¹…ã‚’åºƒã’ã‚‹      | C-x } | C-N C-x } ã® N ã«, ç§»å‹•æ–‡å­—æ•°ã‚’è¨­å®šå¯ |
| Window ã®æ¨ªå¹…ã‚’ç‹­ã‚ã‚‹      | C-x { |                                       |
| Window ã®é«˜ã•ã‚’æ‹¡å¤§        | C-x ^ |                                       |

** Mini Buffer
*** ã‚³ãƒãƒ³ãƒ‰å±¥æ­´ã®ä¿å­˜ Savehist Mode
Mini Bufferã®å…¥åŠ›å±¥æ­´ã‚„,æ¤œç´¢Â·ç½®æ›ã®å±¥æ­´ãªã©ã‚’ä¿å­˜ã™ã‚‹

#+begin_src emacs-lisp :noweb-ref mini-buffer
(use-package savehist
  :ensure nil
  :init
  (savehist-mode))
#+end_src

*** Vertico
#+begin_src emacs-lisp :noweb-ref mini-buffer
(use-package vertico
  :init
  (vertico-mode)
  :custom
  (vertico-count 20))
#+end_src

*** Orderless
#+begin_src emacs-lisp :noweb-ref mini-buffer
(use-package orderless
  :custom
  (completion-styles '(orderless basic))
  (completion-category-defaults nil)
  (completion-category-overrides '((file (styles partial-completion)))))
#+end_src

*** Consult
_!!_ consult-line ã§ ,(ã‚«ãƒ³ãƒ) ãŒæ¤œç´¢å¯¾è±¡ã«ãªã‚‰ãªã„ã®ã¯, Orderless ã«ãŠã„ã¦ ï½¢æ¤œç´¢èªå¥ã®ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï½£ ãŒæœ‰åŠ¹ã ã‹ã‚‰ã§ã‚ã‚‹.
ã‚«ãƒ³ãƒã‚‚æ¤œç´¢å¯¾è±¡ã«ã—ãŸã„ã¨ãã¯, æ¤œç´¢èªå¥ã®é ­ã« = ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ä»˜ã‘ã‚‹

#+begin_src emacs-lisp :noweb-ref mini-buffer
(use-package consult
  :config
  (add-to-list 'consult-buffer-filter "^magit")

  (defvar sheep/consult-tab-source
    `(:name "Tab Bar"
      :narrow ?t
      :category tab-bar
      :face consult-file
      :items ,(lambda () (mapcar (lambda (tab) (alist-get 'name tab)) (tab-bar-tabs)))
      :action ,(lambda (cand) (tab-bar-select-tab-by-name cand))))

  (add-to-list 'consult-buffer-sources 'sheep/consult-tab-source 'append)

  :bind
  (("M-v" . consult-yank-from-kill-ring)

   ("M-." . consult-line)
   ("H-." . consult-outline)

   ("C-q" . consult-buffer)

   ("C-c m"   . consult-mark)
   ("C-x r b" . consult-bookmark)
   ("C-x p b" . consult-project-buffer)
   ("C-x p g" . consult-ripgrep)))
#+end_src

*** Embark
#+begin_src emacs-lisp :noweb-ref mini-buffer
(use-package embark
  :bind (("M-@" . embark-act)))
#+end_src
| Actionãƒªã‚¹ãƒˆã‚’è¡¨ç¤º* | C-@ | embark-act |

#+begin_src emacs-lisp :noweb-ref mini-buffer
(use-package embark-consult
  :after (embark consult))
#+end_src

*** Marginalia
#+begin_src emacs-lisp :noweb-ref mini-buffer
(use-package marginalia
  :init (marginalia-mode)
  :config
  (add-to-list 'marginalia-annotators '(file builtin)))
#+end_src

*** æœ€è¿‘é–‹ã„ãŸãƒ•ã‚¡ã‚¤ãƒ« recentf
Crux ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨, ãƒŸãƒ‹ãƒãƒƒãƒ•ã‚¡ã«ä¸€è¦§ãŒè¡¨ç¤ºã§ãã‚‹

#+begin_src emacs-lisp :noweb-ref mini-buffer
(use-package recentf
  :ensure nil
  :config
  (setopt recentf-max-saved-items 1024) ;; ä¿å­˜ã™ã‚‹å±¥æ­´ã®æœ€å¤§æ•°
  (recentf-mode))
#+end_src

** è‡ªå‹•å†èª­ã¿è¾¼ã¿ Auto Revert
Buffer ã§é–‹ã„ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤–éƒ¨ã§å¤‰æ›´ã•ã‚ŒãŸã¨ã, è‡ªå‹•ã§å†èª­ã¿è¾¼ã¿ã‚’è¡Œãªã†. Git ã®ãƒ–ãƒ©ãƒ³ãƒåˆ‡ã‚Šæ›¿ãˆ, Prettier ã‚„ Lint ç³»ãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡Œæ™‚ãªã©

#+begin_src emacs-lisp :noweb-ref auto-revert
(use-package autorevert
  :ensure nil
  :hook (after-init . global-auto-revert-mode) ; èµ·å‹•å¾Œã« Auto Revert ã‚’æœ‰åŠ¹åŒ–
  :custom
  (global-auto-revert-non-file-buffers t) ; ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® Bufferã‚„Buffer ãƒªã‚¹ãƒˆç­‰ã‚‚å†èª­ã¿è¾¼ã¿ã®å¯¾è±¡ã«ã™ã‚‹
  (auto-revert-verbose nil)               ; å†èª­ã¿è¾¼ã¿æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤ºã«ã™ã‚‹
  (auto-revert-check-vc-info t))          ; Git ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æƒ…å ±ã‚‚å†èª­ã¿è¾¼ã¿ã®å¯¾è±¡ã«ã™ã‚‹
#+end_src

* ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ Workspace

** Desktop
#+begin_src emacs-lisp :noweb-ref desktop
(use-package desktop
  :ensure nil
  :config
  (desktop-save-mode 1)
  :custom
  (desktop-save t)
  (desktop-load-locked-desktop t)
  (desktop-restore-eager 10)
  (desktop-scratch-buffer-save t)
  (desktop-globals-to-save nil))
#+end_src

** Project
#+begin_src emacs-lisp :noweb-ref project
(use-package project
  :ensure nil
  :custom
  (project-vc-extra-root-markers '(".git"))
  :config
  (defun sheep/project-switch-to-new-tab-and-dired ()
    "æ–°ã—ã„ã‚¿ãƒ–ã‚’ä½œæˆã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã‚’Dirvish(Dired)ã§é–‹ã"
    (interactive)
    (let ((dir (project-root (project-current t))))
      (tab-bar-new-tab)
      (dired dir)))

  (setq project-switch-commands
        '((sheep/project-switch-to-new-tab-and-dired "New Tab & Dirvish" "n")
          (project-find-file "Find file" "f")
          (magit-project-status "Magit" "m")
          (project-eshell "Eshell" "e"))))
#+end_src

** Tab Bar
#+begin_src emacs-lisp :noweb-ref tab-bar
(use-package tab-bar
  :ensure nil
  :init
  (tab-bar-mode 1)
  (tab-bar-history-mode 1)
  :custom
  (tab-bar-show nil)
  (tab-bar-new-tab-choice sheep/home-org-file)
  :bind
  ("C-c <left>"  . tab-bar-history-back)
  ("C-c <right>" . tab-bar-history-forward))
#+end_src

* ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª Directory

** Dired
#+begin_src emacs-lisp :noweb-ref directory
(use-package dired
  :ensure nil
  :config
  (setq dired-listing-switches "-lA --group-directories-first"))
#+end_src
| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é–‹ã                 | C-x d                            | find fileã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¦ã‚‚èµ·å‹•ã™ã‚‹ |
| Close Window                       | q                                |                                             |
| Open File                          | RET, n                           |                                             |
| Next Line                          | n, SPC                           |                                             |
| Previous Line                      | p                                |                                             |
| Create Directory                   | +                                |                                             |
| ä¸Šã®éšå±¤ã¸                         | ^                                |                                             |
| Buffer æ›´æ–°                        | g                                |                                             |
|------------------------------------+----------------------------------+---------------------------------------------|
| mark                               | m                                |                                             |
| å‰Šé™¤å€™è£œã¨ã—ã¦mark                 | d                                |                                             |
| markã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤             | x                                |                                             |
| æ­£è¦è¡¨ç¾ã§mark                     | *%                               |                                             |
| 1è¡Œä¸Šã®markã‚’å¤–ã™                  | <BackSpace>                      |                                             |
| ç¾åœ¨è¡Œã®markã‚’å¤–ã™                 | u                                |                                             |
| ãƒãƒ¼ã‚¯ã‚’å…¨ã¦å¤–ã™                   | *!                               |                                             |
|------------------------------------+----------------------------------+---------------------------------------------|
| æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤             | D                                |                                             |
| æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼           | C                                |                                             |
| æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åã‚’å¤‰æ›´           | R                                |                                             |
| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚„ãƒ•ã‚¡ã‚¤ãƒ«åã®ä¸€æ‹¬ç·¨é›† | M-x wdired-change-to-wdired-mode |                                             |
| ä¸€æ‹¬ç·¨é›†ã®é©ç”¨                     | C-c C-c                          |                                             |
| ä¸€æ‹¬ç·¨é›†ã®å†…å®¹ã‚’ç ´æ£„               | C-c ESC                          |                                             |

** Dirvish
#+begin_src emacs-lisp :noweb-ref directory
(use-package dirvish
  :init
  (dirvish-override-dired-mode)
  :custom
  (dirvish-attributes
   '(nerd-icons file-time file-size collapse subtree-state vc-state git-msg))
  (dirvish-mode-line-format
   '(:left (sort symlink) :right (omit yank index)))
  :config
  (setq dirvish-default-layout '((0 0.4 0.6) (0 0.6 0.4)))
  :bind
  (:map dired-mode-map
        ("TAB" . dirvish-subtree-toggle)
        ("f"   . dirvish-file-info-menu)
        ("y"   . dirvish-yank-menu)
        ("N"   . dirvish-narrow)
        ("h"   . dired-up-directory)
        ("l"   . dired-find-file)
        ("C-t" . other-window)))
#+END_SRC

** Nerd Icons
#+begin_src emacs-lisp :noweb-ref directory
(use-package nerd-icons
  :custom
  (nerd-icons-font-family "Symbols Nerd Font Mono"))
#+end_src

* ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ Bookmark

#+begin_src emacs-lisp :noweb-ref bookmark
(use-package bookmark
  :ensure nil
  :custom
  (bookmark-save-flag 1))
#+end_src

| bookmark-set   | C-x r m |                  |
| bookmark-jamp* | C-x r b | consult-bookmark |

* ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ  Package System

1. ~(package-initialize)~ ã§åˆæœŸåŒ–. =early-init.org= ã® ~(setq package-enable-at-startup nil)~ ã¨ã‚»ãƒƒãƒˆã§ç”¨ã„ã‚‹
2. ~(require 'use-package)~ ã§ =use-package= ã‚’èª­ã¿è¾¼ã‚€(å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯ãªãuse-packageãã®ã‚‚ã®)
3. ~(setq use-package-always-ensure t)~ ã§ =use-package= ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã‚’è¨­å®š
   t: ã™ã¹ã¦ã® =use-package= å®£è¨€ã§ =:ensure t= ã‚’æŒ‡å®šã™ã‚‹ã®ã¨åŒã˜å‹•ä½œã¨ãªã‚‹.ã¤ã¾ã‚Šè‡ªå‹•ã§èª­ã¿å–ã‚‹. =package-refresh-contents= (ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã®æ›´æ–°)ã¯æ‰‹å‹•ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ã‚ã‚Š

#+begin_src emacs-lisp :noweb-ref package-system
(package-initialize)
(require 'use-package)
(setq use-package-always-ensure t)
#+end_src

** Commands
| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã‚’æœ€æ–°ã®çŠ¶æ…‹ã«æ›´æ–°ã™ã‚‹       | M-x package-refresh-contents           | ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‰ã«å®Ÿè¡Œ |
| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«                     | M-x package-install RET <Package Name> |                                  |
| å†èµ·å‹•ã›ãšã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸæ‹¡å¼µæ©Ÿèƒ½ã‚’èª­ã¿è¾¼ã‚€ | M-x package-initialize                 |                                  |

** ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‰Šé™¤
=M-x list-packages= > =d= > =x=
ãƒªã‚¹ãƒˆã« =dependency= ã¨è¨˜è¼‰ã•ã‚ŒãŸã‚‚ã®ã¯ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸. =M-x package-autoremove= ã§å‰Šé™¤

** ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨å±¥æ­´ã®å‰Šé™¤
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å°å…¥ã«ã‚ˆã‚ŠEmacsæœ¬ä½“ã®å‹•ä½œãŒä¸å®‰å®šã«ãªã£ãŸã¨ãã¯,ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï½¥å±¥æ­´ã‚‚å‰Šé™¤ã—ã¦ã¿ã‚‹ã¨ã‚ˆã„
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å®Ÿä½“: =~/.emacs.d/elpa/=
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥: =~/.emacs.d/elpa/archives= ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«
- M-xã§å…¥åŠ›ã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚„æ¤œç´¢æ–‡å­—åˆ—ã®å±¥æ­´: =~/.emacs.d/history=

* å¤‰æ•° Global Variable

** ãƒ•ã‚©ãƒ³ãƒˆ
PlemolJP(IBM Plex Monoã¨IBM Plex Sans JPã®åˆå­—)ã¯æ—¥æœ¬èªãŒé–“å»¶ã³ã—Org Modeãªã©æ–‡ç« ä¸­å¿ƒã®å®Ÿç”¨ã«ã¯è€ãˆãªã„.ãã“ã§IBM Plex Monoã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆFaceã«è¨­å®šã®ä¸Š,æ—¥æœ¬èª(å…¨è§’)ã«ã¯Noto Sans Mono CJK JPã‚’å‰²ã‚Šå½“ã¦ãŸ
Tableã®ã¿PlemolJPã‚’æŒ‡å®šã—ã¦ã„ã‚‹.åŠè§’è‹±æ•°ã®è¡¨ç¤ºã¯PlemolJP(ãƒ—ãƒ¬ãƒ¼ãƒ³ãªIBM Plex Monoã¨åŒã˜)ãŒæœ‰åŠ¹ã¨ãªã‚‹.æ—¥æœ¬èª(å…¨è§’)ã®è¡¨ç¤ºã¯Noto Sans Mono CJK JPã§ä¸Šæ›¸ãã•ã‚Œã‚‹.æ–‡å­—ãƒ”ãƒƒãƒã¯PlemolJPã®è¨­å®šãŒç”Ÿãã‚‹ãŸã‚Tableã®è¡¨ç¤ºå´©ã‚ŒãŒæŠ‘åˆ¶ã•ã‚Œã‚‹

Org Modeã®Level(è¦‹å‡ºã—)ç­‰ã«ä½¿ç”¨ã™ã‚‹ãƒ—ãƒ­ãƒãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ•ã‚©ãƒ³ãƒˆã¨ã—ã¦Noto Sans CJK JPã‚’æ¡ç”¨ã—ã¦ã„ã‚‹

#+begin_src emacs-lisp :noweb-ref variable
(defvar sheep/fonts
  `((default  . "IBM Plex Mono")
    (japanese . "Noto Sans Mono CJK JP")
    (write-h  . "Noto Sans CJK JP")
    (table    . "PlemolJP"))
  "Font Familyã®å®šç¾©")

(defun sheep/font (name)
  (alist-get name sheep/fonts))
#+end_src

** ã‚«ãƒ©ãƒ¼
#+begin_src emacs-lisp :noweb-ref variable
(defvar solarized-colors
  '((base03  . "#002b36")
    (base02  . "#073642")
    (base01  . "#586e75")
    (base00  . "#657b83")
    (base0   . "#839496")
    (base1   . "#93a1a1")
    (base2   . "#eee8d5")
    (base3   . "#fdf6e3")
    (yellow  . "#b58900")
    (orange  . "#cb4b16")
    (red     . "#dc322f")
    (magenta . "#d33682")
    (violet  . "#6c71c4")
    (blue    . "#268bd2")
    (cyan    . "#2aa198")
    (green   . "#859900"))
  "Solarizedã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã®å®šç¾©")

(defun solarized (name)
  (alist-get name solarized-colors))

(defvar sheep/colors
  `((fg         . ,(solarized 'base01))
    (bg         . ,(solarized 'base3))
    (bg-alt     . ,(solarized 'base2))
    (link       . ,(solarized 'blue))
    (h1         . ,(solarized 'orange))
    (h2         . ,(solarized 'cyan))
    (h3         . ,(solarized 'yellow))
    (h4         . ,(solarized 'violet))
    (h5         . ,(solarized 'green))
    (strong     . ,(solarized 'base01))
    (emphasis   . ,(solarized 'orange))
    (annotation . ,(solarized 'violet))
    (caption    . ,(solarized 'green))
    (line       . ,(solarized 'base2))
    (cursor-en  . ,(solarized 'base01))
    (cursor-jp  . ,(solarized 'magenta))
    (cursor-ka  . ,(solarized 'cyan))
    (fg-henkan  . ,(solarized 'base3))
    (bg-henkan  . ,(solarized 'violet)))
  "UIè¦ç´ ã”ã¨ã®ã‚«ãƒ©ãƒ¼ã®å®šç¾©")

(defun sheep/color (name)
  (alist-get name sheep/colors))
#+end_src

* å¤–è¦³ Global Appearance

** ãƒ†ãƒ¼ãƒ Solarized Theme
#+begin_src emacs-lisp :noweb-ref theme
(use-package solarized-theme
  :config
  (load-theme 'solarized-light t))
#+end_src

*** Colorset
| base03 | #002b36 | base02 | #073642 | base01 | #586e75 | base00  | #657b83 |
| base0  | #839496 | base1  | #93a1a1 | base2  | #eee8d5 | base3   | #fdf6e3 |
| yellow | #b58900 | orange | #cb4b16 | red    | #dc322f | magenta | #d33682 |
| violet | #6c71c4 | blue   | #268bd2 | cyan   | #2aa198 | green   | #859900 |

[[file:~/.emacs.d/.github/assets/solarized-palette.png]]

** ãƒ•ã‚§ã‚¤ã‚¹ Face
=ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆFace= ã¯ *ã™ã¹ã¦ã®ãƒãƒƒãƒ•ã‚¡ã®åŸºæº–* ã¨ã—ã¦æ©Ÿèƒ½ã—,ãƒ•ã‚©ãƒ³ãƒˆ,ãƒ†ã‚­ã‚¹ãƒˆè‰²,ãƒãƒƒãƒ•ã‚¡èƒŒæ™¯è‰²ãªã©ãŒè¨­å®šã§ãã‚‹
_!!_ height(ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º)ã‚’3æ¡ã®æ•°å­—ã§è¨­å®šã™ã‚‹å ´åˆ,100=10pt.1ã”ã¨ã«ã‚µã‚¤ã‚ºãŒå¤‰ã‚ã‚‹ã‚ã‘ã§ã¯ãªã„

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆFaceã¨åˆ¥ã«æ—¥æœ¬èªç”¨ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’è¨­å®šã—ã¦ã„ã‚‹
Solarized Themeã§ã¯Org Modeã®Level(è¦‹å‡ºã—)ãŒãƒ—ãƒ­ãƒãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ•ã‚©ãƒ³ãƒˆã«ãªã‚‹.æ—¥æœ¬èªç”¨ã®ãƒ—ãƒ­ãƒãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ•ã‚©ãƒ³ãƒˆã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ãªã„ã¨æ—¥æœ¬èªãŒã‚®ã‚¶ã¤ã
Italicã¯èµ¤å­—(Caution),Underlineã¯ç·‘å°æ–‡å­—(Caption)ã¨,ç”¨é€”å¤‰æ›´&Faceèª¿æ•´ã—ã¦ã„ã‚‹

_!!_ ä»¥ä¸‹ã®use-packageã¯,è¡Œç•ªå·ã®è¡¨ç¤ºãªã©,Faceã¯çµ¡ã¾ãªã„ãŒè¦‹ãŸç›®ã«é–¢ã‚ã‚‹è¨­å®šã‚‚å«ã‚€

#+begin_src emacs-lisp :noweb-ref global-face
(use-package emacs
  :ensure nil
  :hook
  ;; è¡Œç•ªå·ã‚’è¡¨ç¤º
  (prog-mode . display-line-numbers-mode) ; ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å…¨èˆ¬
  (conf-mode . display-line-numbers-mode) ; è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å…¨èˆ¬

  :config
  ;; ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆFace
  (set-face-attribute 'default nil
                      :family (sheep/font 'default)  ; Font
                      :height 100                    ; Font Size
                      :weight 'normal                ; Font Weight
                      :foreground (sheep/color 'fg)  ; Font å‰æ™¯è‰²
                      :background (sheep/color 'bg)) ; Buffer èƒŒæ™¯è‰²

  (dolist (script '(kana han symbol cjk-misc bopomofo))
    (set-fontset-font t script (font-spec :family (sheep/font 'japanese))))

  ;; ãƒ—ãƒ­ãƒãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ•ã‚©ãƒ³ãƒˆ
  (set-face-attribute 'variable-pitch nil
                      :family (sheep/font 'write-h)
                      :height 1.0
                      :weight 'normal)

  ;; Bold,Italic,Underline
  (set-face-attribute 'bold nil
                      :foreground (sheep/color 'strong)
                      :weight 'bold)
  (set-face-attribute 'italic nil
                      :foreground (sheep/color 'caption)
                      :height 0.9
                      :underline nil)
  (set-face-attribute 'underline nil
                      :foreground (sheep/color 'emphasis)
                      :underline nil)

  ;; Mode Line
  (set-face-attribute 'mode-line nil :underline nil)
  (set-face-attribute 'mode-line-inactive nil :underline nil)

  ;; Fringe
  (fringe-mode 12)                                ; å¹…
  (set-face-background 'fringe (sheep/color 'bg)) ; èƒŒæ™¯è‰²

  ;; Windowé–“ã®å¢ƒç•Œç·š
  (set-face-attribute 'vertical-border nil
                      :foreground (sheep/color 'line)))
#+end_src

* Prog Mode

#+begin_src emacs-lisp :noweb-ref prog-mode
(use-package html-ts-mode
  :ensure nil
  :mode "\\.html?\\'")

(use-package css-ts-mode
  :ensure nil
  :mode "\\.css\\'")
#+end_src

* Conf Mode

#+begin_src emacs-lisp :noweb-ref conf-mode
(use-package yaml-ts-mode
  :ensure nil
  :mode "\\.ya?ml\\'")

(use-package toml-ts-mode
  :ensure nil
  :mode "\\.toml\\'")

(use-package json-ts-mode
  :ensure nil
  :mode "\\.json\\'")
#+end_src

* Org Mode

** Terms
- Tree: å…¨ä½“ã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³(æœ¨æ§‹é€ )
- Subtree: ç‰¹å®šã®Headlineä¸‹ã®æœ¨æ§‹é€ 
- Headline: éšå±¤çš„ãªè¦‹å‡ºã—
- Element: è¦‹å‡ºã—(Headline),ãƒªã‚¹ãƒˆå…¨ä½“,æ®µè½,ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ãªã©ï½¢æ„å‘³ã®ã‚ã‚‹å¡Šï½£ã®ã“ã¨
- Sentense: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ =. ? ã€‚= ã§çµ‚ã‚ã‚‹æ–‡ç« ã®ã“ã¨. ã©ã®æ–‡å­—ã§ã©ã®ã‚ˆã†ã«åŒºåˆ‡ã‚‹ã‹ã¯ sentence-end é–¢æ•°ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½

** Org Modeã®åŸºæœ¬
ã‚¹ãƒ ãƒ¼ã‚ºã«Speed CommandãŒä½¿ãˆã‚‹ã‚ˆã†ã«,Orgè¦‹å‡ºã—ã®è¡Œé ­ã«ç§»å‹•ã—ãŸã¨ãè‡ªå‹•ã§åŠè§’è‹±æ•°(skk-latin-mode)ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹å‡¦ç†ã‚’å…¥ã‚Œã¦ã„ã‚‹.

#+begin_src emacs-lisp :noweb-ref org-mode
(use-package org
  :ensure nil
  :hook
  (org-src-mode . (lambda () (setq-local header-line-format nil))) ; ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ç·¨é›†ãƒãƒƒãƒ•ã‚¡ã®èª¬æ˜ã‚’éè¡¨ç¤º

  :custom
  (org-use-speed-commands t)           ; ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚³ãƒãƒ³ãƒ‰ã‚’æœ‰åŠ¹åŒ–

  (org-startup-indented t)             ; é–‹ã„ãŸã¨ãã«è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ
  (org-indent-indentation-per-level 4) ; ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆå¹…
  (org-src-preserve-indentation t)     ; ã‚½ãƒ¼ã‚¹ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’ä¿æŒ

  (org-hide-emphasis-markers t)        ; ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—è¨˜å·ã‚’éš ã™
  (word-wrap-by-category t)            ; å’Œæ¬§æ··åˆæ–‡ã®æŠ˜è¿”ã—ã‚’æ”¹å–„

  (org-startup-with-inline-images t)   ; ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸã¨ãã«ç”»åƒã‚’è¡¨ç¤º
  (org-image-actual-width nil)         ; ç”»åƒã‚µã‚¤ã‚ºã®è‡ªå‹•èª¿æ•´ã‚’ç„¡åŠ¹åŒ–
  (org-image-max-width 600)            ; ç”»åƒã®æœ€å¤§å¹…

  :config
  (require 'org-tempo) ; <s TAB ç­‰ã§ã®ã‚½ãƒ¼ã‚¹ãƒ–ãƒ­ãƒƒã‚¯æŒ¿å…¥ã‚’æœ‰åŠ¹åŒ–

  (defun sheep/org-insert-item-eol ()
    "è¡Œæœ«ã§ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ "
    (interactive)
    (end-of-line)
    (org-meta-return))

  (defun sheep/org-kill-element ()
    "è¦ç´ å…¨ä½“ã‚’å‰Šé™¤"
    (interactive)
    (let ((beg (point)))
      (org-mark-element)
      (kill-region (region-beginning) (region-end))))

  (defun sheep/org-backward-kill-element ()
    "å‰ã®è¦ç´ å…¨ä½“ã‚’å‰Šé™¤"
    (interactive)
    (let ((end (point)))
      (org-backward-element)
      (kill-region (point) end)))

  (defun sheep/skk-latin-at-org-heading (&rest _args)
    "Orgè¦‹å‡ºã—è¡Œã§ã¯åŠè§’è‹±æ•°(skk-latin-mode)ã«åˆ‡ã‚Šæ›¿ãˆ"
    (when (and (derived-mode-p 'org-mode)
               (org-at-heading-p))
      (skk-latin-mode 1)))

  ;; è¤‡æ•°ã®ã‚³ãƒãƒ³ãƒ‰ã«,å®Ÿè¡Œå¾Œ(after),Orgè¦‹å‡ºã—è¡Œãªã‚‰åŠè§’è‹±æ•°ã«åˆ‡ã‚Šæ›¿ãˆã‚‹å‡¦ç†ã‚’è¿½åŠ 
  (dolist (func '(crux-move-beginning-of-line
                  org-forward-element
                  org-backward-element
                  org-previous-visible-heading
                  org-next-visible-heading
                  outline-up-heading))
    (advice-add func :after #'sheep/skk-latin-at-org-heading))

  :bind
  (:map org-mode-map
        ("H-m"   . org-insert-heading-respect-content) ; Heading ã‚’å­è¦ç´ ã®ä¸‹ã«è¿½åŠ  (è¡Œåˆ†å‰²ãªã—)
        ("M-m"   . sheep/org-insert-item-eol)          ; List item ã‚’ä¸‹ã«è¿½åŠ  (è¡Œåˆ†å‰²ãªã—)
        ("C-S-m" . org-meta-return)                    ; è¡Œé ­ - ä¸Šã« / è¡Œä¸­ - åˆ†å‰²ã—ã¦ä¸‹ã« / è¡Œæœ« - ä¸‹ã«
        ("C-M-m" . org-insert-todo-heading)            ; Chexbox ã®è¿½åŠ . è¡Œã§ã®æŒ™å‹•ã¯ org-meta-return ã¨åŒã˜

        ("C-r" . org-metaup)
        ("C-t" . org-metadown)
        ("C-y" . org-metaleft)
        ("C-u" . org-metaright)
        ("M-r" . org-shiftup)
        ("M-t" . org-shiftdown)
        ("M-y" . org-shiftleft)
        ("M-u" . org-shiftright)
        ("H-r" . org-shiftmetaup)
        ("H-t" . org-shiftmetadown)
        ("H-y" . org-shiftmetaleft)
        ("H-u" . org-shiftmetaright)

        ("H-h" . org-mark-element)
        ("H-f" . org-forward-element)
        ("H-b" . org-backward-element)
        ("H-p" . org-up-element)
        ("H-n" . org-down-element)
        ("H-d" . sheep/org-kill-element)
        ("H-j" . sheep/org-backward-kill-element)

        ("C-M-b" . org-previous-visible-heading) ; å‰ã® Heading ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•
        ("C-M-f" . org-next-visible-heading)     ; æ¬¡ã® Heading ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•
        ("C-M-p" . outline-up-heading)           ; è¦ªã® Heading ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•

        ("H-c" . org-ctrl-c-ctrl-c) ; C-c C-c !! ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã‚ˆã‚Šå®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ãŒç•°ãªã‚‹

        ("C--" . org-toggle-inline-images) ; ç”»åƒè¡¨ç¤ºã®åˆ‡ã‚Šæ›¿ãˆ

        ("H-q" . org-edit-special) ; ã‚½ãƒ¼ã‚¹ãƒ–ãƒ­ãƒƒã‚¯ã‚’å±•é–‹
        ("H-s" . org-babel-tangle) ; ã‚½ãƒ¼ã‚¹ãƒ–ãƒ­ãƒƒã‚¯ã‚’æŠ½å‡º

        ;; ä¸Šæ›¸ãã—ãªã„ã¨ä½œå‹•ã—ãªã„ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
        ("M-h" . mark-word)
        ("C-," . (lambda () (interactive) (kill-line 0)))

        :map org-src-mode-map
        ("H-s" . org-edit-src-exit)    ; ã‚½ãƒ¼ã‚¹ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã®å®Œäº†
        ("H-g" . org-edit-src-abort))) ; ã‚½ãƒ¼ã‚¹ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«
#+end_src

*** Speed Command
~(org-use-speed-commands t)~ ã§æœ‰åŠ¹åŒ–. Level è¡Œé ­ã§æ©Ÿèƒ½ã™ã‚‹

- n / p: æ¬¡ã® / å‰ã® Headline
- f / b: æ¬¡ã® / å‰ã® Headline

_!!_ ä¸Šè¨˜ä»¥å¤–ã«ã‚‚æ§˜ã€…ãªã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹ãŒ, å¾Œè¿°ã®ç§»å‹•ç³»ã‚³ãƒãƒ³ãƒ‰ã®æ–¹ãŒä¾¿åˆ©

*** ç§»å‹•ç³»ã®ã‚³ãƒãƒ³ãƒ‰
- Meta = Ctrl
- Shift = Meta
- ShiftMeta = Hyper

| Item       | Meta U D        | Meta L R            | Shift U D         | Shift L R | Shift-Meta U D       | Shift-Meta L R      |
|------------+-----------------+---------------------+-------------------+-----------+----------------------+---------------------|
| Heading    | ç§»å‹• (å­å­«è¦ç´ ) | éšå±¤ (ç›´ä¸‹ã®å­è¦ç´ ) | å„ªå…ˆåº¦            | ã‚¿ã‚¹ã‚¯    | ç§»å‹• (å˜ç‹¬Â·éšå±¤å†…å¤–) | éšå±¤ (å­å­«è¦ç´ )     |
| List       | ç§»å‹• (å­å­«è¦ç´ ) | éšå±¤ (å˜ç‹¬)         | ã‚«ãƒ¼ã‚½ãƒ« (åŒéšå±¤) | ãƒãƒ¼ã‚«ãƒ¼  | ç§»å‹• (å˜ç‹¬Â·éšå±¤å†…å¤–) | -                   |
| æ®µè½       | ç§»å‹• (éšå±¤å†…)   | -                   | -                 | -         | ç§»å‹• (éšå±¤å†…å¤–)      | -                   |
| Table      | è¡Œç§»å‹•          | åˆ—ç§»å‹•              | ã‚»ãƒ«ä¸Šä¸‹          | ã‚»ãƒ«å·¦å³  | è¡Œå‰Šé™¤ / ä¸Šã«è¡Œè¿½åŠ   | åˆ—å‰Šé™¤ / å·¦ã«åˆ—è¿½åŠ  |
| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | -               | ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£é–“ã®ç§»å‹•  | å€¤ã®å¤‰æ›´          | å€¤ã®å¤‰æ›´  | -                    | -                   |

*** Table
| ä¸Šã«æŒ¿å…¥ *                    | H-t, C-o         |                      |
| ä¸‹ã«æŒ¿å…¥ (Tableå†…ã®æœ€çµ‚è¡Œ)    | C-m              |                      |
| ä¸‹ã«ç©ºè¡Œ                      | H-o              | è¡Œæœ«ã®ã¿C-mã§ã‚‚å¯    |
| åŒºåˆ‡ã‚Šç·šã®æŒ¿å…¥                | ç©ºè¡Œ > ï½œ- > TAB |                      |
| Delete Line *                 | H-r, M-k         |                      |
| ã‚»ãƒ«ã®æœ«å°¾ã«ç§»å‹•              | M-e              | Org Forward Sentense |
| å‰å¾Œã®ã‚»ãƒ«ã«ç§»å‹•Â·ãƒ†ãƒ¼ãƒ–ãƒ«æ•´å½¢ | C-i / C-I        |                      |
| ãƒ†ãƒ¼ãƒ–ãƒ«æ•´å½¢ *                | H-c              |                      |

***  Checkbox
=zt= ã§æ–°è¦ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ä»˜ããƒªã‚¹ãƒˆãŒä½œæˆã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã‚‹. C-S-m ã§æ¬¡ã®è¡Œã«å¢—ã‚„ã™. H-c ã§ã‚ªãƒ³ã‚ªãƒ•

*** ç”»åƒ, ãƒªãƒ³ã‚¯
=zl= ã§ =[[][]]= ãŒä½œæˆã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã‚‹. =C--= (~org-toggle-inline-images~) ã§è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹

ãƒ‘ã‚¹ã¯ =~/= (ãƒãƒ«ãƒ€è¨˜æ³•)ã§è¨˜è¿°ã§ãã‚‹
å‰è¡Œã« ~#+ATTR_ORG: :width 300~ ã¨è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã‚µã‚¤ã‚ºæŒ‡å®šãŒã§ãã‚‹

_!!_ ç”»åƒã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³è¡¨ç¤ºã•ã›ãŸã„ã¨ãã¯, èª¬æ˜æ–‡ã‚’çœç•¥ã—, =[[]]= ã®ä¸­ã«ãƒ‘ã‚¹ã®ã¿ã‚’è¡¨ç¤ºã™ã‚‹

*** Tag
Headline ã§ H-c ã‚’æŠ¼ã™ã¨ Tag ã‚’è¨­å®šã§ãã‚‹

** ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¨Org Babel
*** Tangle
åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«æŠ½å‡ºã—ãŸã„ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®Headerã«è¨˜è¿°ã™ã‚‹

- ~:tangle "filename"~: æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åã«å‡ºåŠ›
- ~:tangle "path/to/file"~: ç›¸å¯¾ãƒ‘ã‚¹ã¾ãŸã¯çµ¶å¯¾ãƒ‘ã‚¹ã§æŒ‡å®šå¯èƒ½

*** Noweb
ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯é–“ã®éšå±¤é–¢ä¿‚ã‚’ä½œã‚‹.è¦ªã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®Headerã«ã¯ ~:noweb yes~ ã‚’è¨˜è¿°ã—,Bodyå†…ã§å­ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®é…ç½®ã‚’æŒ‡å®šã™ã‚‹
#+begin_src emacs-lisp :noweb yes
<<child-block-1>>

<<child-block-2>
#+end_src

å­ãƒ–ãƒ­ãƒƒã‚¯ã®Headerã«ã¯ ~:noweb-ref child-block-1~ ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹.åŒåã®å­ãƒ–ãƒ­ãƒƒã‚¯ã¯ä¸Šã‹ã‚‰é †ã«è¦ªã«çµ±åˆã•ã‚ŒæŠ½å‡ºã•ã‚Œã‚‹
å†å¸°çš„ã«ä½•éšå±¤ã«ã‚‚ã§ãã‚‹ãŒ,å®Ÿç”¨ä¸Šã¯2éšå±¤,ã›ã„ãœã„3éšå±¤ãŒé™åº¦ã ã‚ã†

*** ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å†…ã®è¡Œé ­ã® =*= ã‚„ =#+= ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ãŒå¿…è¦.è‡ªå‹•ã§å‰ã« =,= ãŒä»˜ã.ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—è¨˜å·ã¯æŠ½å‡ºæ™‚ã«è‡ªå‹•é™¤å»ã•ã‚Œã‚‹

*** Org Tempo
| Code Block    | ~<s + TAB~ |
| Quote Block   | ~<q + TAB~ |
| Example Block | ~<e + TAB~ |

** Org Appear
#+begin_src emacs-lisp :noweb-ref org-mode
(use-package org-appear
  :hook
  (org-mode . org-appear-mode)
  :config
  (setq org-appear-autoentities t)
  (setq org-appear-autolinks t))
#+end_src

** Org Modeã®Face
#+begin_src emacs-lisp :noweb-ref org-face
(use-package org
  :ensure nil
  :custom
  (org-tags-column 0)     ; Tag ã‚’ Heading ã®ãƒ†ã‚­ã‚¹ãƒˆç›´å¾Œã«é…ç½®
  (org-auto-align-tags t) ; Tag ã® è‡ªå‹•æ•´åˆ—ã‚’æœ‰åŠ¹åŒ–

  :config
  (let ((colors (list (sheep/color 'h1)
                      (sheep/color 'h2)
                      (sheep/color 'h3)
                      (sheep/color 'h4)
                      (sheep/color 'h5)
                      (sheep/color 'fg)
                      (sheep/color 'fg)
                      (sheep/color 'fg))))
    (dotimes (i 8)
      (set-face-attribute
       (intern (format "org-level-%d" (1+ i))) nil
       :foreground (nth i colors)
       :height 1.0
       :weight 'normal)))

  (set-face-attribute 'org-link nil
                      :foreground (sheep/color 'link)
                      :weight 'normal
                      :underline t)
  (set-face-attribute 'org-verbatim nil
                      :foreground (sheep/color 'annotation))
  (set-face-attribute 'org-checkbox nil :box nil)            ; Checkbox ã®ãƒœãƒƒã‚¯ã‚¹è£…é£¾ã‚’ç„¡åŠ¹åŒ–
  (set-face-attribute 'org-table nil
                      :family (sheep/font 'table)
                      :height 0.97)

  (set-face-attribute 'org-tag nil
                      :foreground (sheep/color 'annotation)
                      :background (sheep/color 'bg-alt)
                      :weight 'normal
                      :height 0.8
                      :box `(:line-width 5 :color ,(sheep/color 'bg)))

  ;; Code Block
  (set-face-attribute 'org-block nil
                      :background (sheep/color 'bg-alt)
                      :height 0.97)
  (set-face-attribute 'org-block-begin-line nil
                      :background (sheep/color 'bg)
                      :height 0.8
                      :underline nil)
  (set-face-attribute 'org-block-end-line nil
                      :background (sheep/color 'bg)
                      :height 0.8
                      :overline nil)

  ;; Inline Code
  (set-face-attribute 'org-code nil
                      :foreground (sheep/color 'fg)
                      :background (sheep/color 'bg-alt)))
#+end_src

* Markdown Mode

#+begin_src emacs-lisp :noweb-ref markdown-mode
(use-package markdown-mode
  :mode
  ("\\.md\\'" . markdown-mode)
  :defer t)
#+end_src

* Emacs Lisp Mode

#+begin_src emacs-lisp :noweb-ref emacs-lisp-mode
(add-hook 'emacs-lisp-mode-hook
          (lambda ()
            (outline-minor-mode 1)
            (setq-local outline-regexp "^;;;")))
#+end_src

| è¨­å®šã®åæ˜                      | C-x C-e                  | è©•ä¾¡ã—ãŸã„Så¼ã®å¾Œã‚ã«Pointã‚’ç½®ã         |
| ã‚«ãƒ¬ãƒ³ãƒˆãƒãƒƒãƒ•ã‚¡ã‚’å…¨ã¦è©•ä¾¡     | M-x eval-buffer          |                                          |
| Så¼ã®è©•ä¾¡                      | M-x eval-print-last-sexp | å››å‰‡æ¼”ç®—ã®ã‚ˆã†ãªå˜ç´”ãªå¼ã®è©•ä¾¡ã«ã‚‚ä½¿ãˆã‚‹ |

* ã‚µãƒ–ã‚·ã‚¹ãƒ†ãƒ  Sub Sytems

** Magit
#+begin_src emacs-lisp :noweb-ref magit
(use-package magit
  :hook
  ;; è¡Œæœ«ã®ç©ºç™½æ–‡å­—ã®å¯è¦–åŒ–ã‚’ git-commit-mode ã§ã¯ OFF
  (git-commit-mode . (lambda ()
                       (setq-local show-trailing-whitespace nil)))

  :custom
  (magit-display-buffer-function #'magit-display-buffer-same-window-except-diff-v1) ; ç¾åœ¨ã® Window ã§é–‹ã
  (magit-bury-buffer-function 'magit-mode-quit-window) ; çµ‚äº†æ™‚ã« Buffer ã‚’å‰Šé™¤
  (magit-log-section-commit-count 50)                  ; Recent Commits ã®è¡¨ç¤ºæ•°

  :config
  (advice-add 'magit-commit-diff :override #'ignore) ; Commit æ™‚ã« Diff ã‚’è¡¨ç¤ºã—ãªã„

  :bind
  (("C-x g" . magit-status)

   :map with-editor-mode-map
   ("H-c" . with-editor-finish)   ; ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç·¨é›†ã‚’å®Œäº†
   ("H-g" . with-editor-cancel))) ; ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç·¨é›†ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
#+end_src

| git init                   | C-x g      | Dirvish ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ãŠã                                  |
| Magit Burrer Open          | C-x g      |                                                                       |
| git add                    | s          | ãƒ•ã‚¡ã‚¤ãƒ« or Untracked files                                           |
| Unstage                    | u          | ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã®å–ã‚Šæ¶ˆã—                                                |
| git commit                 | c c        | ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç·¨é›†ã— C-c C-c ã§ã‚³ãƒŸãƒƒãƒˆç¢ºå®š. C-c C-k ã§å–ã‚Šæ¶ˆã— |
| Buffer æ›´æ–°                | g          |                                                                       |
| ç®¡ç†ç”»é¢ã‚’æŠœã‘ã‚‹           | q          |                                                                       |
| ã‚³ãƒŸãƒƒãƒˆã®å®Ÿè¡Œ             | C-c C-c    |                                                                       |
| ã‚³ãƒŸãƒƒãƒˆã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«       | C-c C-k    |                                                                       |
| git push                   | P          |                                                                       |
| ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½è·¡å¯¾è±¡ã‹ã‚‰é™¤å¤– | K (å¤§æ–‡å­—) | git rm --chashed <fileå> ã¨åŒã˜                                      |

*** Mode Line
=Git:main= ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã‚‹

| :  | Modified          |
| -  | No changes        |
| @  | Staged            |
| ?  | Unknown/Untracked |
| ï¼ | Error             |

** Vterm
ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆãŸã¨ãã¯, ãƒ†ã‚­ã‚¹ãƒˆã‚’é¸æŠ > RET ã§ã‚³ãƒ”ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œ, ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‹ã‚‰æŠœã‘ã‚‹

#+begin_src emacs-lisp :noweb-ref vterm
(use-package vterm
  :commands vterm
  :hook
  ;; è¡Œæœ«ã®ç©ºç™½æ–‡å­—ã®å¯è¦–åŒ–ã‚’ vterm-mode ã§ã¯ OFF
  (vterm-mode . (lambda ()
                  (setq-local show-trailing-whitespace nil)))

  :config
  (setq vterm-max-scrollback 10000)

  :bind
  (("C-x v"   . vterm)                 ; Vterm ã®èµ·å‹•
   ("C-c 3 v" . vterm-other-window)    ; Vterm ã‚’æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§èµ·å‹•
   :map vterm-mode-map
   ("C-a"   . vterm-beginning-of-line) ; è¡Œã®å…ˆé ­ã«ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•
   ("C-e"   . vterm-end-of-line)       ; è¡Œã®æœ«å°¾ã«ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•
   ("C-M-p" . vterm-previous-prompt)   ; å‰ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
   ("C-M-n" . vterm-next-prompt)       ; æ¬¡ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
   ("C-y"   . vterm-yank)              ; ãƒšãƒ¼ã‚¹ãƒˆ
   ("M-y"   . vterm-yank-pop)          ; ãƒšãƒ¼ã‚¹ãƒˆ(é¸æŠ)
   ("C-t"   . other-window)            ; åˆ¥ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•
   ("C-z"   . vterm-undo)              ; undo
   ("C-w"   . vterm-copy-mode)))       ; ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
#+end_src

| Clear                            | C-l     |                                                                |
| Log Out                          | C-d     | å…¥åŠ›æ™‚ã«ã¯æ–‡å­—å‰Šé™¤ã¨ãªã‚‹                                       |

*** Install
1.Vterm ã‚’å‹•ã‹ã™ãŸã‚ã«å¿…è¦ãª CMake ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   ~sudo apt install cmake libtool-bin libvterm-dev~
2. init.el ã« =use package vterm...= ã§è¨­å®šã‚’è¨˜è¿°ã—å†èµ·å‹• > =M-x vterm=

** Gptel
#+begin_src emacs-lisp :noweb-ref gptel
(use-package gptel
  :config
  (setq gptel-model 'gemini-2.5-flash) ; ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½¿ç”¨ã™ã‚‹ãƒ¢ãƒ‡ãƒ«

  ;; ã™ã¹ã¦ã®å•ç­”ã«å…±é€šã™ã‚‹æŒ‡ç¤º
  (setq gptel-system-message "ç§ã®ã“ã¨ã‚’ ï½¢ç¾Šã•ã‚“ï½£ ã¨å‘¼ã‚“ã§ä¸‹ã•ã„. å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ä¿¡é ¼æ€§ã®é«˜ã„ã‚½ãƒ¼ã‚¹ã‹ã‚‰æœ€æ–°ã®æƒ…å ±ã‚’åé›†ã—ã¦ä¸‹ã•ã„")

  ;; æŒ‡ç¤ºã‚»ãƒƒãƒˆã®å®šç¾©
  (setq gptel-directives
        '((default . "You are a large language model living in Emacs and a helpful assistant. Respond concisely.") ; !! ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ‡ç¤ºã‚»ãƒƒãƒˆã¯å¤‰æ›´ä¸å¯
          (emacs . "ã‚ãªãŸã¯ GNU Emacs ã‚’é•·å¹´æ„›ç”¨ã—, Emacs Lisp ã«ç²¾é€šã™ã‚‹ãƒãƒƒã‚«ãƒ¼ã§ã™. Emacs ãƒ“ã‚®ãƒŠãƒ¼ã®ç¾Šã•ã‚“ã‚’æ•™è‚²ã—ã¦ãã ã•ã„. ç¾Šã•ã‚“ã¯ Ubuntu 24.04 LTS (GNOME, Wayland) ç’°å¢ƒã§ Emacs 30.2 (PGTK Build) ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™")
          (linux . "ã‚ãªãŸã¯ Linux ã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã§ã‚ã‚Š, CLI ã«ã‚‚ GUI (GNOME) ã«ã‚‚ç²¾é€šã—ãŸãƒãƒƒã‚«ãƒ¼ã§ã™. æ–°äººã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ç¾Šã•ã‚“ã‚’æ•™è‚²ã—ã¦ãã ã•ã„. ç¾Šã•ã‚“ã¯ Ubuntu 24.04 LTS (GNOME, Wayland) ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™")
  (setq gptel-track-media t)
          (hugo . "ã‚ãªãŸã¯æ–‡èŠ¸çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ä¼é“è€…ã§ã‚ã‚Š, å€‹äººã‚µã‚¤ãƒˆé‹å–¶è€…ã§ã‚ã‚‹ç¾Šã•ã‚“ã®è‰¯ãã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ã§ã™. ç¾Šã•ã‚“ã® Org Mode (Emacs), Hugo, ox-hugo, Claudflare ã‚’ç”¨ã„ãŸ æ–‡èŠ¸çš„ã‚µã‚¤ãƒˆåˆ¶ä½œã®è©¦ã¿ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãã ã•ã„ ")))
  (setq gptel-include-reasoning nil)

  ;; Backends
  (gptel-make-gemini "Gemini-Pro"
    :key (lambda () (getenv "GEMINI_API_KEY_PRO"))
    :stream t
    :models '(gemini-2.5-flash
              gemini-2.5-pro
              gemini-3-pro-preview))

  (setq gptel-backend
        (gptel-make-gemini "Gemini-Free"
          :key (lambda () (getenv "GEMINI_API_KEY_FREE"))
          :stream t
          :models '(gemini-2.5-flash
                    gemini-2.5-pro)))

  ;; Custom Functions
  (defun sheep/create-gptel-buffer ()
    "Gptelç”¨ã®ä½¿ã„æ¨ã¦ãƒãƒƒãƒ•ã‚¡ã‚’ä½œæˆ"
    (interactive)
    (let* ((base-name "*Gptel*")
           (buffer-name (generate-new-buffer-name base-name))
           (buf (get-buffer-create buffer-name)))
      (with-current-buffer buf
        (erase-buffer)
        (markdown-mode)
        (gptel-mode)
        (set-buffer-modified-p nil)
        (insert "### "))
      (switch-to-buffer buf)
      (message "Temporary buffer '%s' created." buffer-name)))

  (defun sheep/gptel-send-with-separator ()
    "åŒºåˆ‡ã‚Šç·šã‚’å…¥ã‚Œã¦é€ä¿¡"
    (interactive)
    (insert "\n\n---")
    (call-interactively 'gptel-send))

  (defun sheep/erase-buffer-insert-heading ()
    "ãƒãƒƒãƒ•ã‚¡ã‚’ã‚¯ãƒªã‚¢ã—ã¦è¦‹å‡ºã—ã‚’æŒ¿å…¥"
    (interactive)
    (erase-buffer)
    (insert "### "))

  :bind
  ("C-c a a" . sheep/create-gptel-buffer)
  ("C-c 3 a" . gptel)
  ("C-c a d" . gptel-add)
  ("C-c a f" . gptel-add-file)
  ("C-c a p" . gptel-system-prompt)
  ("C-c a n" . gptel-end-of-response)
  ("C-c a k" . gptel-context-remove-all)
  ("C-c a e" . sheep/erase-buffer-insert-heading)
  ("C-c a m" . gptel-menu)
  ("C-c a g" . gptel-mode)
  ("C-c <return>"   . sheep/gptel-send-with-separator)
  ("C-c a <return>" . gptel-send))
  #+end_src

| è³ªå•ã®é€ä¿¡(åŒºåˆ‡ã‚Šç·šæœ‰)*         | C-c RET   | è‡ªä½œé–¢æ•°                 |
| è³ªå•ã®é€ä¿¡*                     | C-c a RET | gptel-send               |
| è³ªå•ç”¨Bufferã®ä½œæˆ*             | C-c a a   | è‡ªä½œé–¢æ•°                 |
| è³ªå•ç”¨Bufferã®ä½œæˆ(New Window)* | C-c 3 a   | gptel                    |
| Add Contexts(Buffer)*           | C-c a d   | gptel-add                |
| Add Contexts(File)*             | C-c a f   | gptel-add-file           |
| Promptã®é¸æŠ*                   | C-c a p   | gptel-system-proCmpt     |
| æ¬¡ã®è³ªå•*                       | C-c a n   | gptel-end-of-response    |
| Context Clear*                  | C-c a k   | gptel-context-remove-all |
| Erace Buffer > Insert Heading*  | C-c k a   | è‡ªä½œé–¢æ•°                 |
| gptel Menu*                     | C-c a m   | gptel-menu               |
| gptel Mode*                     | C-c a g   | gptel-mode               |
*** Settings
ç’°å¢ƒå¤‰æ•°ã¯ =/~.profile= ã«è¨­å®šã™ã‚‹.å¤‰æ›´ã—ãŸéš›ã¯å†èµ·å‹•ãŒå¿…è¦

* ã‚¨ãƒ©ãƒ¼å¯¾å¿œÂ·ãƒ¬ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

| æ“ä½œã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»ã‚³ãƒãƒ³ãƒ‰ä¸­æ–­ | C-g                      |                                          |
| å†å¸°ç·¨é›†ãƒ¬ãƒ™ãƒ«ã‹ã‚‰æŠœã‘å‡ºã™     | M-x ESC ESC ESC          | ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®()ãŒ[]ã§å›²ã‚ã‚ŒãŸçŠ¶æ…‹     |
| ãƒ‡ãƒ¼ã‚¿å›å¾©                     | M-x recover file         | RET>filepath>RET>yes                     |

| ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®faceã‚’èª¿ã¹ã‚‹         | M-x describe-face       |
| ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’èª¿ã¹ã‚‹ | M-x describe-key        |
| List Colors                        | M-x list-colors-display |
